


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > UI</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">mindustry.core</a>
</div>

<h1>Coverage Summary for Class: UI (mindustry.core)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">UI</td>
<td class="coverageStat">
  <span class="percent">
    1.6%
  </span>
  <span class="absValue">
    (1/61)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.7%
  </span>
  <span class="absValue">
    (11/299)
  </span>
</td>
</tr>
  <tr>
    <td class="name">UI$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$10</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$11</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$12</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/24)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/23)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$6</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$7</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$8</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">UI$9</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    1.3%
  </span>
  <span class="absValue">
    (1/78)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    2.6%
  </span>
  <span class="absValue">
    (11/424)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package mindustry.core;
&nbsp;
&nbsp;import arc.*;
&nbsp;import arc.Graphics.*;
&nbsp;import arc.Input.*;
&nbsp;import arc.assets.*;
&nbsp;import arc.func.*;
&nbsp;import arc.graphics.*;
&nbsp;import arc.graphics.g2d.*;
&nbsp;import arc.input.*;
&nbsp;import arc.math.*;
&nbsp;import arc.math.geom.*;
&nbsp;import arc.scene.*;
&nbsp;import arc.scene.actions.*;
&nbsp;import arc.scene.event.*;
&nbsp;import arc.scene.style.*;
&nbsp;import arc.scene.ui.*;
&nbsp;import arc.scene.ui.TextField.*;
&nbsp;import arc.scene.ui.Tooltip.*;
&nbsp;import arc.scene.ui.layout.*;
&nbsp;import arc.struct.*;
&nbsp;import arc.util.*;
&nbsp;import mindustry.editor.*;
&nbsp;import mindustry.game.EventType.*;
&nbsp;import mindustry.gen.*;
&nbsp;import mindustry.graphics.*;
&nbsp;import mindustry.logic.*;
&nbsp;import mindustry.ui.*;
&nbsp;import mindustry.ui.dialogs.*;
&nbsp;import mindustry.ui.fragments.*;
&nbsp;
&nbsp;import static arc.scene.actions.Actions.*;
&nbsp;import static mindustry.Vars.*;
&nbsp;
&nbsp;public class UI implements ApplicationListener, Loadable{
&nbsp;    public static String billions, millions, thousands;
&nbsp;
&nbsp;    public static PixmapPacker packer;
&nbsp;
&nbsp;    public MenuFragment menufrag;
&nbsp;    public HudFragment hudfrag;
&nbsp;    public ChatFragment chatfrag;
&nbsp;    public ConsoleFragment consolefrag;
&nbsp;    public MinimapFragment minimapfrag;
&nbsp;    public PlayerListFragment listfrag;
&nbsp;    public LoadingFragment loadfrag;
&nbsp;    public HintsFragment hints;
&nbsp;
&nbsp;    public WidgetGroup menuGroup, hudGroup;
&nbsp;
&nbsp;    public AboutDialog about;
&nbsp;    public GameOverDialog restart;
&nbsp;    public CustomGameDialog custom;
&nbsp;    public EditorMapsDialog maps;
&nbsp;    public LoadDialog load;
&nbsp;    public DiscordDialog discord;
&nbsp;    public JoinDialog join;
&nbsp;    public HostDialog host;
&nbsp;    public PausedDialog paused;
&nbsp;    public SettingsMenuDialog settings;
&nbsp;    public KeybindDialog controls;
&nbsp;    public MapEditorDialog editor;
&nbsp;    public LanguageDialog language;
&nbsp;    public BansDialog bans;
&nbsp;    public AdminsDialog admins;
&nbsp;    public TraceDialog traces;
&nbsp;    public DatabaseDialog database;
&nbsp;    public ContentInfoDialog content;
&nbsp;    public PlanetDialog planet;
&nbsp;    public ResearchDialog research;
&nbsp;    public SchematicsDialog schematics;
&nbsp;    public ModsDialog mods;
&nbsp;    public ColorPicker picker;
&nbsp;    public EffectsDialog effects;
&nbsp;    public LogicDialog logic;
&nbsp;    public FullTextDialog fullText;
&nbsp;    public CampaignCompleteDialog campaignComplete;
&nbsp;
&nbsp;    public IntMap&lt;Dialog&gt; followUpMenus;
&nbsp;
&nbsp;    public Cursor drillCursor, unloadCursor, targetCursor, repairCursor;
&nbsp;
&nbsp;    private @Nullable Element lastAnnouncement;
&nbsp;
<b class="nc">&nbsp;    public UI(){</b>
<b class="nc">&nbsp;        Fonts.loadFonts();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static void loadColors(){
<b class="nc">&nbsp;        Colors.put(&quot;accent&quot;, Pal.accent);</b>
<b class="nc">&nbsp;        Colors.put(&quot;unlaunched&quot;, Color.valueOf(&quot;8982ed&quot;));</b>
<b class="nc">&nbsp;        Colors.put(&quot;highlight&quot;, Pal.accent.cpy().lerp(Color.white, 0.3f));</b>
<b class="nc">&nbsp;        Colors.put(&quot;stat&quot;, Pal.stat);</b>
<b class="nc">&nbsp;        Colors.put(&quot;negstat&quot;, Pal.negativeStat);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void loadAsync(){
&nbsp;
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    @Override
&nbsp;    public void loadSync(){
<b class="nc">&nbsp;        Fonts.outline.getData().markupEnabled = true;</b>
<b class="nc">&nbsp;        Fonts.def.getData().markupEnabled = true;</b>
<b class="nc">&nbsp;        Fonts.def.setOwnsTexture(false);</b>
&nbsp;
<b class="nc">&nbsp;        Core.assets.getAll(Font.class, new Seq&lt;&gt;()).each(font -&gt; font.setUseIntegerPositions(true));</b>
<b class="nc">&nbsp;        Core.scene = new Scene();</b>
<b class="nc">&nbsp;        Core.input.addProcessor(Core.scene);</b>
&nbsp;
<b class="nc">&nbsp;        int[] insets = Core.graphics.getSafeInsets();</b>
<b class="nc">&nbsp;        Core.scene.marginLeft = insets[0];</b>
<b class="nc">&nbsp;        Core.scene.marginRight = insets[1];</b>
<b class="nc">&nbsp;        Core.scene.marginTop = insets[2];</b>
<b class="nc">&nbsp;        Core.scene.marginBottom = insets[3];</b>
&nbsp;
<b class="nc">&nbsp;        Tex.load();</b>
<b class="nc">&nbsp;        Icon.load();</b>
<b class="nc">&nbsp;        Styles.load();</b>
<b class="nc">&nbsp;        Tex.loadStyles();</b>
<b class="nc">&nbsp;        Fonts.loadContentIcons();</b>
&nbsp;
<b class="nc">&nbsp;        Dialog.setShowAction(() -&gt; sequence(alpha(0f), fadeIn(0.1f)));</b>
<b class="nc">&nbsp;        Dialog.setHideAction(() -&gt; sequence(fadeOut(0.1f)));</b>
&nbsp;
<b class="nc">&nbsp;        Tooltips.getInstance().animations = false;</b>
<b class="nc">&nbsp;        Tooltips.getInstance().textProvider = text -&gt; new Tooltip(t -&gt; t.background(Styles.black6).margin(4f).add(text));</b>
<b class="nc">&nbsp;        if(mobile){</b>
<b class="nc">&nbsp;            Tooltips.getInstance().offsetY += Scl.scl(60f);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Core.settings.setErrorHandler(e -&gt; {</b>
<b class="nc">&nbsp;            Log.err(e);</b>
<b class="nc">&nbsp;            Core.app.post(() -&gt; showErrorMessage(&quot;Failed to access local storage.\nSettings will not be saved.&quot;));</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        ClickListener.clicked = () -&gt; Sounds.press.play();</b>
&nbsp;
<b class="nc">&nbsp;        drillCursor = Core.graphics.newCursor(&quot;drill&quot;, Fonts.cursorScale());</b>
<b class="nc">&nbsp;        unloadCursor = Core.graphics.newCursor(&quot;unload&quot;, Fonts.cursorScale());</b>
<b class="nc">&nbsp;        targetCursor = Core.graphics.newCursor(&quot;target&quot;, Fonts.cursorScale());</b>
<b class="nc">&nbsp;        repairCursor = Core.graphics.newCursor(&quot;repair&quot;, Fonts.cursorScale());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public Seq&lt;AssetDescriptor&gt; getDependencies(){
<b class="nc">&nbsp;        return Seq.with(new AssetDescriptor&lt;&gt;(Control.class), new AssetDescriptor&lt;&gt;(&quot;outline&quot;, Font.class), new AssetDescriptor&lt;&gt;(&quot;default&quot;, Font.class));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void update(){
<b class="nc">&nbsp;        if(disableUI || Core.scene == null) return;</b>
&nbsp;
<b class="nc">&nbsp;        Events.fire(Trigger.uiDrawBegin);</b>
&nbsp;
<b class="nc">&nbsp;        Core.scene.act();</b>
<b class="nc">&nbsp;        Core.scene.draw();</b>
&nbsp;
<b class="nc">&nbsp;        if(Core.input.keyTap(KeyCode.mouseLeft) &amp;&amp; Core.scene.hasField()){</b>
<b class="nc">&nbsp;            Element e = Core.scene.getHoverElement();</b>
<b class="nc">&nbsp;            if(!(e instanceof TextField)){</b>
<b class="nc">&nbsp;                Core.scene.setKeyboardFocus(null);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Events.fire(Trigger.uiDrawEnd);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void init(){
<b class="nc">&nbsp;        billions = Core.bundle.get(&quot;unit.billions&quot;);</b>
<b class="nc">&nbsp;        millions = Core.bundle.get(&quot;unit.millions&quot;);</b>
<b class="nc">&nbsp;        thousands = Core.bundle.get(&quot;unit.thousands&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        menuGroup = new WidgetGroup();</b>
<b class="nc">&nbsp;        hudGroup = new WidgetGroup();</b>
&nbsp;
<b class="nc">&nbsp;        menufrag = new MenuFragment();</b>
<b class="nc">&nbsp;        hudfrag = new HudFragment();</b>
<b class="nc">&nbsp;        hints = new HintsFragment();</b>
<b class="nc">&nbsp;        chatfrag = new ChatFragment();</b>
<b class="nc">&nbsp;        minimapfrag = new MinimapFragment();</b>
<b class="nc">&nbsp;        listfrag = new PlayerListFragment();</b>
<b class="nc">&nbsp;        loadfrag = new LoadingFragment();</b>
<b class="nc">&nbsp;        consolefrag = new ConsoleFragment();</b>
&nbsp;
<b class="nc">&nbsp;        picker = new ColorPicker();</b>
<b class="nc">&nbsp;        effects = new EffectsDialog();</b>
<b class="nc">&nbsp;        editor = new MapEditorDialog();</b>
<b class="nc">&nbsp;        controls = new KeybindDialog();</b>
<b class="nc">&nbsp;        restart = new GameOverDialog();</b>
<b class="nc">&nbsp;        join = new JoinDialog();</b>
<b class="nc">&nbsp;        discord = new DiscordDialog();</b>
<b class="nc">&nbsp;        load = new LoadDialog();</b>
<b class="nc">&nbsp;        custom = new CustomGameDialog();</b>
<b class="nc">&nbsp;        language = new LanguageDialog();</b>
<b class="nc">&nbsp;        database = new DatabaseDialog();</b>
<b class="nc">&nbsp;        settings = new SettingsMenuDialog();</b>
<b class="nc">&nbsp;        host = new HostDialog();</b>
<b class="nc">&nbsp;        paused = new PausedDialog();</b>
<b class="nc">&nbsp;        about = new AboutDialog();</b>
<b class="nc">&nbsp;        bans = new BansDialog();</b>
<b class="nc">&nbsp;        admins = new AdminsDialog();</b>
<b class="nc">&nbsp;        traces = new TraceDialog();</b>
<b class="nc">&nbsp;        maps = new EditorMapsDialog();</b>
<b class="nc">&nbsp;        content = new ContentInfoDialog();</b>
<b class="nc">&nbsp;        planet = new PlanetDialog();</b>
<b class="nc">&nbsp;        research = new ResearchDialog();</b>
<b class="nc">&nbsp;        mods = new ModsDialog();</b>
<b class="nc">&nbsp;        schematics = new SchematicsDialog();</b>
<b class="nc">&nbsp;        logic = new LogicDialog();</b>
<b class="nc">&nbsp;        fullText = new FullTextDialog();</b>
<b class="nc">&nbsp;        campaignComplete = new CampaignCompleteDialog();</b>
<b class="nc">&nbsp;        followUpMenus = new IntMap&lt;&gt;();</b>
&nbsp;
<b class="nc">&nbsp;        Group group = Core.scene.root;</b>
&nbsp;
<b class="nc">&nbsp;        menuGroup.setFillParent(true);</b>
<b class="nc">&nbsp;        menuGroup.touchable = Touchable.childrenOnly;</b>
<b class="nc">&nbsp;        menuGroup.visible(() -&gt; state.isMenu());</b>
<b class="nc">&nbsp;        hudGroup.setFillParent(true);</b>
<b class="nc">&nbsp;        hudGroup.touchable = Touchable.childrenOnly;</b>
<b class="nc">&nbsp;        hudGroup.visible(() -&gt; state.isGame());</b>
&nbsp;
<b class="nc">&nbsp;        Core.scene.add(menuGroup);</b>
<b class="nc">&nbsp;        Core.scene.add(hudGroup);</b>
&nbsp;
<b class="nc">&nbsp;        hudfrag.build(hudGroup);</b>
<b class="nc">&nbsp;        menufrag.build(menuGroup);</b>
<b class="nc">&nbsp;        chatfrag.build(hudGroup);</b>
<b class="nc">&nbsp;        minimapfrag.build(hudGroup);</b>
<b class="nc">&nbsp;        listfrag.build(hudGroup);</b>
<b class="nc">&nbsp;        consolefrag.build(hudGroup);</b>
<b class="nc">&nbsp;        loadfrag.build(group);</b>
<b class="nc">&nbsp;        new FadeInFragment().build(group);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void resize(int width, int height){
<b class="nc">&nbsp;        if(Core.scene == null) return;</b>
&nbsp;
<b class="nc">&nbsp;        int[] insets = Core.graphics.getSafeInsets();</b>
<b class="nc">&nbsp;        Core.scene.marginLeft = insets[0];</b>
<b class="nc">&nbsp;        Core.scene.marginRight = insets[1];</b>
<b class="nc">&nbsp;        Core.scene.marginTop = insets[2];</b>
<b class="nc">&nbsp;        Core.scene.marginBottom = insets[3];</b>
&nbsp;
<b class="nc">&nbsp;        Core.scene.resize(width, height);</b>
<b class="nc">&nbsp;        Events.fire(new ResizeEvent());</b>
&nbsp;    }
&nbsp;
&nbsp;    public TextureRegionDrawable getIcon(String name){
<b class="nc">&nbsp;        if(Icon.icons.containsKey(name)) return Icon.icons.get(name);</b>
<b class="nc">&nbsp;        return Core.atlas.getDrawable(&quot;error&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public TextureRegionDrawable getIcon(String name, String def){
<b class="nc">&nbsp;        if(Icon.icons.containsKey(name)) return Icon.icons.get(name);</b>
<b class="nc">&nbsp;        return getIcon(def);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void loadAnd(Runnable call){
<b class="nc">&nbsp;        loadAnd(&quot;@loading&quot;, call);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void loadAnd(String text, Runnable call){
<b class="nc">&nbsp;        loadfrag.show(text);</b>
<b class="nc">&nbsp;        Time.runTask(7f, () -&gt; {</b>
<b class="nc">&nbsp;            call.run();</b>
<b class="nc">&nbsp;            loadfrag.hide();</b>
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void showTextInput(String titleText, String text, int textLength, String def, boolean numbers, Cons&lt;String&gt; confirmed, Runnable closed) {
<b class="nc">&nbsp;        showTextInput(titleText, text, textLength, def, numbers, false, confirmed, closed);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showTextInput(String titleText, String text, int textLength, String def, boolean numbers, boolean allowEmpty, Cons&lt;String&gt; confirmed, Runnable closed){
<b class="nc">&nbsp;        if(mobile){</b>
<b class="nc">&nbsp;            var description = (text.startsWith(&quot;@&quot;) ? Core.bundle.get(text.substring(1)) : text);</b>
<b class="nc">&nbsp;            var empty = allowEmpty;</b>
<b class="nc">&nbsp;            Core.input.getTextInput(new TextInput(){{</b>
<b class="nc">&nbsp;                this.title = (titleText.startsWith(&quot;@&quot;) ? Core.bundle.get(titleText.substring(1)) : titleText);</b>
<b class="nc">&nbsp;                this.text = def;</b>
<b class="nc">&nbsp;                this.numeric = numbers;</b>
<b class="nc">&nbsp;                this.maxLength = textLength;</b>
<b class="nc">&nbsp;                this.accepted = confirmed;</b>
<b class="nc">&nbsp;                this.canceled = closed;</b>
<b class="nc">&nbsp;                this.allowEmpty = empty;</b>
<b class="nc">&nbsp;                this.message = description;</b>
&nbsp;            }});
<b class="nc">&nbsp;        }else{</b>
<b class="nc">&nbsp;            new Dialog(titleText){{</b>
<b class="nc">&nbsp;                cont.margin(30).add(text).padRight(6f);</b>
<b class="nc">&nbsp;                TextFieldFilter filter = numbers ? TextFieldFilter.digitsOnly : (f, c) -&gt; true;</b>
<b class="nc">&nbsp;                TextField field = cont.field(def, t -&gt; {}).size(330f, 50f).get();</b>
<b class="nc">&nbsp;                field.setMaxLength(textLength);</b>
<b class="nc">&nbsp;                field.setFilter(filter);</b>
<b class="nc">&nbsp;                buttons.defaults().size(120, 54).pad(4);</b>
<b class="nc">&nbsp;                buttons.button(&quot;@cancel&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                    closed.run();</b>
<b class="nc">&nbsp;                    hide();</b>
&nbsp;                });
<b class="nc">&nbsp;                buttons.button(&quot;@ok&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                    confirmed.get(field.getText());</b>
<b class="nc">&nbsp;                    hide();</b>
<b class="nc">&nbsp;                }).disabled(b -&gt; !allowEmpty &amp;&amp; field.getText().isEmpty());</b>
&nbsp;
<b class="nc">&nbsp;                keyDown(KeyCode.enter, () -&gt; {</b>
<b class="nc">&nbsp;                    String text = field.getText();</b>
<b class="nc">&nbsp;                    if(allowEmpty || !text.isEmpty()){</b>
<b class="nc">&nbsp;                        confirmed.get(text);</b>
<b class="nc">&nbsp;                        hide();</b>
&nbsp;                    }
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                closeOnBack(closed);</b>
<b class="nc">&nbsp;                show();</b>
&nbsp;
<b class="nc">&nbsp;                Core.scene.setKeyboardFocus(field);</b>
<b class="nc">&nbsp;                field.setCursorPosition(def.length());</b>
&nbsp;            }};
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void showTextInput(String title, String text, String def, Cons&lt;String&gt; confirmed){
<b class="nc">&nbsp;        showTextInput(title, text, 32, def, confirmed);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showTextInput(String title, String text, int textLength, String def, Cons&lt;String&gt; confirmed){
<b class="nc">&nbsp;        showTextInput(title, text, textLength, def, false, confirmed);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showTextInput(String title, String text, int textLength, String def, boolean numeric, Cons&lt;String&gt; confirmed){
<b class="nc">&nbsp;        showTextInput(title, text, textLength, def, numeric, confirmed, () -&gt; {});</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showInfoFade(String info){
<b class="nc">&nbsp;        showInfoFade(info,  7f);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showInfoFade(String info, float duration){
<b class="nc">&nbsp;        var cinfo = Core.scene.find(&quot;coreinfo&quot;);</b>
<b class="nc">&nbsp;        Table table = new Table();</b>
<b class="nc">&nbsp;        table.touchable = Touchable.disabled;</b>
<b class="nc">&nbsp;        table.setFillParent(true);</b>
<b class="nc">&nbsp;        if(cinfo.visible &amp;&amp; !state.isMenu()) table.marginTop(cinfo.getPrefHeight() / Scl.scl() / 2);</b>
<b class="nc">&nbsp;        table.actions(Actions.fadeOut(duration, Interp.fade), Actions.remove());</b>
<b class="nc">&nbsp;        table.top().add(info).style(Styles.outlineLabel).padTop(10);</b>
<b class="nc">&nbsp;        Core.scene.add(table);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void addDescTooltip(Element elem, String description){
<b class="nc">&nbsp;        if(description == null) return;</b>
&nbsp;
<b class="nc">&nbsp;        elem.addListener(new Tooltip(t -&gt; t.background(Styles.black8).margin(4f).add(description).color(Color.lightGray)){</b>
&nbsp;            {
<b class="nc">&nbsp;                allowMobile = true;</b>
&nbsp;            }
&nbsp;            @Override
&nbsp;            protected void setContainerPosition(Element element, float x, float y){
<b class="nc">&nbsp;                this.targetActor = element;</b>
<b class="nc">&nbsp;                Vec2 pos = element.localToStageCoordinates(Tmp.v1.set(0, 0));</b>
<b class="nc">&nbsp;                container.pack();</b>
<b class="nc">&nbsp;                container.setPosition(pos.x, pos.y, Align.topLeft);</b>
<b class="nc">&nbsp;                container.setOrigin(0, element.getHeight());</b>
&nbsp;            }
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    /** Shows a fading label at the top of the screen. */
&nbsp;    public void showInfoToast(String info, float duration){
<b class="nc">&nbsp;        var cinfo = Core.scene.find(&quot;coreinfo&quot;);</b>
<b class="nc">&nbsp;        Table table = new Table();</b>
<b class="nc">&nbsp;        table.touchable = Touchable.disabled;</b>
<b class="nc">&nbsp;        table.setFillParent(true);</b>
<b class="nc">&nbsp;        if(cinfo.visible &amp;&amp; !state.isMenu()) table.marginTop(cinfo.getPrefHeight() / Scl.scl() / 2);</b>
<b class="nc">&nbsp;        table.update(() -&gt; {</b>
<b class="nc">&nbsp;            if(state.isMenu()) table.remove();</b>
&nbsp;        });
<b class="nc">&nbsp;        table.actions(Actions.delay(duration * 0.9f), Actions.fadeOut(duration * 0.1f, Interp.fade), Actions.remove());</b>
<b class="nc">&nbsp;        table.top().table(Styles.black3, t -&gt; t.margin(4).add(info).style(Styles.outlineLabel)).padTop(10);</b>
<b class="nc">&nbsp;        Core.scene.add(table);</b>
<b class="nc">&nbsp;        lastAnnouncement = table;</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Shows a label at some position on the screen. Does not fade. */
&nbsp;    public void showInfoPopup(String info, float duration, int align, int top, int left, int bottom, int right){
<b class="nc">&nbsp;        Table table = new Table();</b>
<b class="nc">&nbsp;        table.setFillParent(true);</b>
<b class="nc">&nbsp;        table.touchable = Touchable.disabled;</b>
<b class="nc">&nbsp;        table.update(() -&gt; {</b>
<b class="nc">&nbsp;            if(state.isMenu()) table.remove();</b>
&nbsp;        });
<b class="nc">&nbsp;        table.actions(Actions.delay(duration), Actions.remove());</b>
<b class="nc">&nbsp;        table.align(align).table(Styles.black3, t -&gt; t.margin(4).add(info).style(Styles.outlineLabel)).pad(top, left, bottom, right);</b>
<b class="nc">&nbsp;        Core.scene.add(table);</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Shows a label in the world. This label is behind everything. Does not fade. */
&nbsp;    public void showLabel(String info, float duration, float worldx, float worldy){
<b class="nc">&nbsp;        var table = new Table(Styles.black3).margin(4);</b>
<b class="nc">&nbsp;        table.touchable = Touchable.disabled;</b>
<b class="nc">&nbsp;        table.update(() -&gt; {</b>
<b class="nc">&nbsp;            if(state.isMenu()) table.remove();</b>
<b class="nc">&nbsp;            Vec2 v = Core.camera.project(worldx, worldy);</b>
<b class="nc">&nbsp;            table.setPosition(v.x, v.y, Align.center);</b>
&nbsp;        });
<b class="nc">&nbsp;        table.actions(Actions.delay(duration), Actions.remove());</b>
<b class="nc">&nbsp;        table.add(info).style(Styles.outlineLabel);</b>
<b class="nc">&nbsp;        table.pack();</b>
<b class="nc">&nbsp;        table.act(0f);</b>
&nbsp;        //make sure it&#39;s at the back
<b class="nc">&nbsp;        Core.scene.root.addChildAt(0, table);</b>
&nbsp;
<b class="nc">&nbsp;        table.getChildren().first().act(0f);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showInfo(String info){
<b class="nc">&nbsp;        new Dialog(&quot;&quot;){{</b>
<b class="nc">&nbsp;            getCell(cont).growX();</b>
<b class="nc">&nbsp;            cont.margin(15).add(info).width(400f).wrap().get().setAlignment(Align.center, Align.center);</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            keyDown(KeyCode.enter, this::hide);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showInfoOnHidden(String info, Runnable listener){
<b class="nc">&nbsp;        new Dialog(&quot;&quot;){{</b>
<b class="nc">&nbsp;            getCell(cont).growX();</b>
<b class="nc">&nbsp;            cont.margin(15).add(info).width(400f).wrap().get().setAlignment(Align.center, Align.center);</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            hidden(listener);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showStartupInfo(String info){
<b class="nc">&nbsp;        new Dialog(&quot;&quot;){{</b>
<b class="nc">&nbsp;            getCell(cont).growX();</b>
<b class="nc">&nbsp;            cont.margin(15).add(info).width(400f).wrap().get().setAlignment(Align.left);</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showErrorMessage(String text){
<b class="nc">&nbsp;        new Dialog(&quot;&quot;){{</b>
<b class="nc">&nbsp;            setFillParent(true);</b>
<b class="nc">&nbsp;            cont.margin(15f);</b>
<b class="nc">&nbsp;            cont.add(&quot;@error.title&quot;);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.image().width(300f).pad(2).height(4f).color(Color.scarlet);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.add(text).pad(2f).growX().wrap().get().setAlignment(Align.center);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.button(&quot;@ok&quot;, this::hide).size(120, 50).pad(4);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showException(Throwable t){
<b class="nc">&nbsp;        showException(&quot;&quot;, t);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showException(String text, Throwable exc){
<b class="nc">&nbsp;        if(loadfrag == null) return;</b>
&nbsp;
<b class="nc">&nbsp;        loadfrag.hide();</b>
<b class="nc">&nbsp;        new Dialog(&quot;&quot;){{</b>
<b class="nc">&nbsp;            String message = Strings.getFinalMessage(exc);</b>
&nbsp;
<b class="nc">&nbsp;            setFillParent(true);</b>
<b class="nc">&nbsp;            cont.margin(15);</b>
<b class="nc">&nbsp;            cont.add(&quot;@error.title&quot;).colspan(2);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.image().width(300f).pad(2).colspan(2).height(4f).color(Color.scarlet);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.add((text.startsWith(&quot;@&quot;) ? Core.bundle.get(text.substring(1)) : text) + (message == null ? &quot;&quot; : &quot;\n[lightgray](&quot; + message + &quot;)&quot;)).colspan(2).wrap().growX().center().get().setAlignment(Align.center);</b>
<b class="nc">&nbsp;            cont.row();</b>
&nbsp;
<b class="nc">&nbsp;            Collapser col = new Collapser(base -&gt; base.pane(t -&gt; t.margin(14f).add(Strings.neatError(exc)).color(Color.lightGray).left()), true);</b>
&nbsp;
<b class="nc">&nbsp;            cont.button(&quot;@details&quot;, Styles.togglet, col::toggle).size(180f, 50f).checked(b -&gt; !col.isCollapsed()).fillX().right();</b>
<b class="nc">&nbsp;            cont.button(&quot;@ok&quot;, this::hide).size(110, 50).fillX().left();</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.add(col).colspan(2).pad(2);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showText(String titleText, String text){
<b class="nc">&nbsp;        showText(titleText, text, Align.center);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showText(String titleText, String text, int align){
<b class="nc">&nbsp;        new Dialog(titleText){{</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.image().width(400f).pad(2).colspan(2).height(4f).color(Pal.accent);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.add(text).width(400f).wrap().get().setAlignment(align, align);</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showInfoText(String titleText, String text){
<b class="nc">&nbsp;        new Dialog(titleText){{</b>
<b class="nc">&nbsp;            cont.margin(15).add(text).width(400f).wrap().left().get().setAlignment(Align.left, Align.left);</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showSmall(String titleText, String text){
<b class="nc">&nbsp;        new Dialog(titleText){{</b>
<b class="nc">&nbsp;            cont.margin(10).add(text);</b>
<b class="nc">&nbsp;            titleTable.row();</b>
<b class="nc">&nbsp;            titleTable.image().color(Pal.accent).height(3f).growX().pad(2f);</b>
<b class="nc">&nbsp;            buttons.button(&quot;@ok&quot;, this::hide).size(110, 50).pad(4);</b>
<b class="nc">&nbsp;            closeOnBack();</b>
<b class="nc">&nbsp;        }}.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showConfirm(String text, Runnable confirmed){
<b class="nc">&nbsp;        showConfirm(&quot;@confirm&quot;, text, null, confirmed);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showConfirm(String title, String text, Runnable confirmed){
<b class="nc">&nbsp;        showConfirm(title, text, null, confirmed);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showConfirm(String title, String text, Boolp hide, Runnable confirmed){
<b class="nc">&nbsp;        BaseDialog dialog = new BaseDialog(title);</b>
<b class="nc">&nbsp;        dialog.cont.add(text).width(mobile ? 400f : 500f).wrap().pad(4f).get().setAlignment(Align.center, Align.center);</b>
<b class="nc">&nbsp;        dialog.buttons.defaults().size(200f, 54f).pad(2f);</b>
<b class="nc">&nbsp;        dialog.setFillParent(false);</b>
<b class="nc">&nbsp;        dialog.buttons.button(&quot;@cancel&quot;, Icon.cancel, dialog::hide);</b>
<b class="nc">&nbsp;        dialog.buttons.button(&quot;@ok&quot;, Icon.ok, () -&gt; {</b>
<b class="nc">&nbsp;            dialog.hide();</b>
<b class="nc">&nbsp;            confirmed.run();</b>
&nbsp;        });
<b class="nc">&nbsp;        if(hide != null){</b>
<b class="nc">&nbsp;            dialog.update(() -&gt; {</b>
<b class="nc">&nbsp;                if(hide.get()){</b>
<b class="nc">&nbsp;                    dialog.hide();</b>
&nbsp;                }
&nbsp;            });
&nbsp;        }
<b class="nc">&nbsp;        dialog.keyDown(KeyCode.enter, () -&gt; {</b>
<b class="nc">&nbsp;            dialog.hide();</b>
<b class="nc">&nbsp;            confirmed.run();</b>
&nbsp;        });
<b class="nc">&nbsp;        dialog.keyDown(KeyCode.escape, dialog::hide);</b>
<b class="nc">&nbsp;        dialog.keyDown(KeyCode.back, dialog::hide);</b>
<b class="nc">&nbsp;        dialog.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showCustomConfirm(String title, String text, String yes, String no, Runnable confirmed, Runnable denied){
<b class="nc">&nbsp;        BaseDialog dialog = new BaseDialog(title);</b>
<b class="nc">&nbsp;        dialog.cont.add(text).width(mobile ? 400f : 500f).wrap().pad(4f).get().setAlignment(Align.center, Align.center);</b>
<b class="nc">&nbsp;        dialog.buttons.defaults().size(200f, 54f).pad(2f);</b>
<b class="nc">&nbsp;        dialog.setFillParent(false);</b>
<b class="nc">&nbsp;        dialog.buttons.button(no, () -&gt; {</b>
<b class="nc">&nbsp;            dialog.hide();</b>
<b class="nc">&nbsp;            denied.run();</b>
&nbsp;        });
<b class="nc">&nbsp;        dialog.buttons.button(yes, () -&gt; {</b>
<b class="nc">&nbsp;            dialog.hide();</b>
<b class="nc">&nbsp;            confirmed.run();</b>
&nbsp;        });
<b class="nc">&nbsp;        dialog.keyDown(KeyCode.escape, dialog::hide);</b>
<b class="nc">&nbsp;        dialog.keyDown(KeyCode.back, dialog::hide);</b>
<b class="nc">&nbsp;        dialog.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasAnnouncement(){
<b class="nc">&nbsp;        return lastAnnouncement != null &amp;&amp; lastAnnouncement.parent != null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Display text in the middle of the screen, then fade out. */
&nbsp;    public void announce(String text){
<b class="nc">&nbsp;        announce(text, 3);</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Display text in the middle of the screen, then fade out. */
&nbsp;    public void announce(String text, float duration){
<b class="nc">&nbsp;        Table t = new Table(Styles.black3);</b>
<b class="nc">&nbsp;        t.touchable = Touchable.disabled;</b>
<b class="nc">&nbsp;        t.margin(8f).add(text).style(Styles.outlineLabel).labelAlign(Align.center);</b>
<b class="nc">&nbsp;        t.update(() -&gt; t.setPosition(Core.graphics.getWidth()/2f, Core.graphics.getHeight()/2f, Align.center));</b>
<b class="nc">&nbsp;        t.actions(Actions.fadeOut(duration, Interp.pow4In), Actions.remove());</b>
<b class="nc">&nbsp;        t.pack();</b>
<b class="nc">&nbsp;        t.act(0.1f);</b>
<b class="nc">&nbsp;        Core.scene.add(t);</b>
<b class="nc">&nbsp;        lastAnnouncement = t;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void showOkText(String title, String text, Runnable confirmed){
<b class="nc">&nbsp;        BaseDialog dialog = new BaseDialog(title);</b>
<b class="nc">&nbsp;        dialog.cont.add(text).width(500f).wrap().pad(4f).get().setAlignment(Align.center, Align.center);</b>
<b class="nc">&nbsp;        dialog.buttons.defaults().size(200f, 54f).pad(2f);</b>
<b class="nc">&nbsp;        dialog.setFillParent(false);</b>
<b class="nc">&nbsp;        dialog.buttons.button(&quot;@ok&quot;, () -&gt; {</b>
<b class="nc">&nbsp;            dialog.hide();</b>
<b class="nc">&nbsp;            confirmed.run();</b>
&nbsp;        });
<b class="nc">&nbsp;        dialog.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    // TODO REPLACE INTEGER WITH arc.fun.IntCons(int, T) or something like that.
&nbsp;    public Dialog newMenuDialog(String title, String message, String[][] options, Cons2&lt;Integer, Dialog&gt; buttonListener){
<b class="nc">&nbsp;        return new Dialog(title){{</b>
<b class="nc">&nbsp;            setFillParent(true);</b>
<b class="nc">&nbsp;            removeChild(titleTable);</b>
<b class="nc">&nbsp;            cont.add(titleTable).width(400f);</b>
&nbsp;
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.image().width(400f).pad(2).colspan(2).height(4f).color(Pal.accent).bottom();</b>
<b class="nc">&nbsp;            cont.row();</b>
<b class="nc">&nbsp;            cont.pane(table -&gt; {</b>
<b class="nc">&nbsp;                table.add(message).width(400f).wrap().get().setAlignment(Align.center);</b>
<b class="nc">&nbsp;                table.row();</b>
&nbsp;
<b class="nc">&nbsp;                int option = 0;</b>
<b class="nc">&nbsp;                for(var optionsRow : options){</b>
<b class="nc">&nbsp;                    Table buttonRow = table.row().table().get().row();</b>
<b class="nc">&nbsp;                    int fullWidth = 400 - (optionsRow.length - 1) * 8; // adjust to count padding as well</b>
<b class="nc">&nbsp;                    int width = fullWidth / optionsRow.length;</b>
<b class="nc">&nbsp;                    int lastWidth = fullWidth - width * (optionsRow.length - 1); // take the rest of space for uneven table</b>
&nbsp;
<b class="nc">&nbsp;                    for(int i = 0; i &lt; optionsRow.length; i++){</b>
<b class="nc">&nbsp;                        if(optionsRow[i] == null) continue;</b>
&nbsp;
<b class="nc">&nbsp;                        String optionName = optionsRow[i];</b>
<b class="nc">&nbsp;                        int finalOption = option;</b>
<b class="nc">&nbsp;                        buttonRow.button(optionName, () -&gt; buttonListener.get(finalOption, this))</b>
<b class="nc">&nbsp;                                .size(i == optionsRow.length - 1 ? lastWidth : width, 50).pad(4);</b>
<b class="nc">&nbsp;                        option++;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            }).growX();</b>
&nbsp;        }};
&nbsp;    }
&nbsp;
&nbsp;    /** Shows a menu that fires a callback when an option is selected. If nothing is selected, -1 is returned. */
&nbsp;    public void showMenu(String title, String message, String[][] options, Intc callback){
<b class="nc">&nbsp;        Dialog dialog = newMenuDialog(title, message, options, (option, myself) -&gt; {</b>
<b class="nc">&nbsp;            callback.get(option);</b>
<b class="nc">&nbsp;            myself.hide();</b>
&nbsp;        });
<b class="nc">&nbsp;        dialog.closeOnBack(() -&gt; callback.get(-1));</b>
<b class="nc">&nbsp;        dialog.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Shows a menu that hides when another followUp-menu is shown or when nothing is selected.
&nbsp;     * @see UI#showMenu(String, String, String[][], Intc) */
&nbsp;    public void showFollowUpMenu(int menuId, String title, String message, String[][] options, Intc callback) {
<b class="nc">&nbsp;        Dialog dialog = newMenuDialog(title, message, options, (option, myself) -&gt; callback.get(option));</b>
<b class="nc">&nbsp;        dialog.closeOnBack(() -&gt; {</b>
<b class="nc">&nbsp;            followUpMenus.remove(menuId);</b>
<b class="nc">&nbsp;            callback.get(-1);</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        Dialog oldDialog = followUpMenus.remove(menuId);</b>
<b class="nc">&nbsp;        if(oldDialog != null){</b>
<b class="nc">&nbsp;            dialog.show(Core.scene, null);</b>
<b class="nc">&nbsp;            oldDialog.hide(null);</b>
&nbsp;        }else{
<b class="nc">&nbsp;            dialog.show();</b>
&nbsp;        }
<b class="nc">&nbsp;        followUpMenus.put(menuId, dialog);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void hideFollowUpMenu(int menuId) {
<b class="nc">&nbsp;        if(!followUpMenus.containsKey(menuId)) return;</b>
<b class="nc">&nbsp;        followUpMenus.remove(menuId).hide();</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Formats time with hours:minutes:seconds. */
&nbsp;    public static String formatTime(float ticks){
<b class="nc">&nbsp;        int seconds = (int)(ticks / 60);</b>
<b class="nc">&nbsp;        if(seconds &lt; 60) return &quot;0:&quot; + (seconds &lt; 10 ? &quot;0&quot; : &quot;&quot;) + seconds;</b>
&nbsp;
<b class="nc">&nbsp;        int minutes = seconds / 60;</b>
<b class="nc">&nbsp;        int modSec = seconds % 60;</b>
<b class="nc">&nbsp;        if(minutes &lt; 60) return minutes + &quot;:&quot; + (modSec &lt; 10 ? &quot;0&quot; : &quot;&quot;) + modSec;</b>
&nbsp;
<b class="nc">&nbsp;        int hours = minutes / 60;</b>
<b class="nc">&nbsp;        int modMinute = minutes % 60;</b>
&nbsp;
<b class="nc">&nbsp;        return hours + &quot;:&quot; + (modMinute &lt; 10 ? &quot;0&quot; : &quot;&quot;) + modMinute + &quot;:&quot; + (modSec &lt; 10 ? &quot;0&quot; : &quot;&quot;) + modSec;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String formatAmount(long number){
&nbsp;        //prevent things like bars displaying erroneous representations of casted infinities
<b class="nc">&nbsp;        if(number == Long.MAX_VALUE) return &quot;?&quot;;</b>
<b class="nc">&nbsp;        if(number == Long.MIN_VALUE) return &quot;-?&quot;;</b>
&nbsp;
<b class="nc">&nbsp;        long mag = Math.abs(number);</b>
<b class="nc">&nbsp;        String sign = number &lt; 0 ? &quot;-&quot; : &quot;&quot;;</b>
<b class="nc">&nbsp;        if(mag &gt;= 1_000_000_000){</b>
<b class="nc">&nbsp;            return sign + Strings.fixed(mag / 1_000_000_000f, 1) + &quot;[gray]&quot; + billions + &quot;[]&quot;;</b>
<b class="nc">&nbsp;        }else if(mag &gt;= 1_000_000){</b>
<b class="nc">&nbsp;            return sign + Strings.fixed(mag / 1_000_000f, 1) + &quot;[gray]&quot; + millions + &quot;[]&quot;;</b>
<b class="nc">&nbsp;        }else if(mag &gt;= 10_000){</b>
<b class="nc">&nbsp;            return number / 1000 + &quot;[gray]&quot; + thousands + &quot;[]&quot;;</b>
<b class="nc">&nbsp;        }else if(mag &gt;= 1000){</b>
<b class="nc">&nbsp;            return sign + Strings.fixed(mag / 1000f, 1) + &quot;[gray]&quot; + thousands + &quot;[]&quot;;</b>
&nbsp;        }else{
<b class="nc">&nbsp;            return number + &quot;&quot;;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static int roundAmount(int number){
<b class="fc">&nbsp;        if(number &gt;= 1_000_000_000){</b>
<b class="nc">&nbsp;            return Mathf.round(number, 100_000_000);</b>
<b class="fc">&nbsp;        }else if(number &gt;= 1_000_000){</b>
<b class="nc">&nbsp;            return Mathf.round(number, 100_000);</b>
<b class="fc">&nbsp;        }else if(number &gt;= 10_000){</b>
<b class="fc">&nbsp;            return Mathf.round(number, 1000);</b>
<b class="fc">&nbsp;        }else if(number &gt;= 1000){</b>
<b class="fc">&nbsp;            return Mathf.round(number, 100);</b>
<b class="fc">&nbsp;        }else if(number &gt;= 100){</b>
<b class="fc">&nbsp;            return Mathf.round(number, 100);</b>
<b class="fc">&nbsp;        }else if(number &gt;= 10){</b>
<b class="fc">&nbsp;            return Mathf.round(number, 10);</b>
&nbsp;        }else{
<b class="fc">&nbsp;            return number;</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-10-10 15:58</div>
</div>
</body>
</html>
