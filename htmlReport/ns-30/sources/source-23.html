


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > SettingsMenuDialog</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">mindustry.ui.dialogs</a>
</div>

<h1>Coverage Summary for Class: SettingsMenuDialog (mindustry.ui.dialogs)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">SettingsMenuDialog</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/343)
  </span>
</td>
</tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsCategory</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/40)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable$AreaTextSetting</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable$CheckSetting</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable$Setting</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable$SliderSetting</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/20)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$SettingsTable$TextSetting</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/14)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SettingsMenuDialog$StringProcessor</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/70)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/454)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package mindustry.ui.dialogs;
&nbsp;
&nbsp;import arc.*;
&nbsp;import arc.files.*;
&nbsp;import arc.func.*;
&nbsp;import arc.graphics.*;
&nbsp;import arc.graphics.Texture.*;
&nbsp;import arc.input.*;
&nbsp;import arc.scene.*;
&nbsp;import arc.scene.event.*;
&nbsp;import arc.scene.style.*;
&nbsp;import arc.scene.ui.*;
&nbsp;import arc.scene.ui.TextButton.*;
&nbsp;import arc.scene.ui.layout.*;
&nbsp;import arc.struct.*;
&nbsp;import arc.util.*;
&nbsp;import arc.util.io.*;
&nbsp;import mindustry.content.*;
&nbsp;import mindustry.content.TechTree.*;
&nbsp;import mindustry.core.*;
&nbsp;import mindustry.ctype.*;
&nbsp;import mindustry.game.EventType.*;
&nbsp;import mindustry.gen.*;
&nbsp;import mindustry.graphics.*;
&nbsp;import mindustry.input.*;
&nbsp;import mindustry.ui.*;
&nbsp;
&nbsp;import java.io.*;
&nbsp;import java.util.zip.*;
&nbsp;
&nbsp;import static arc.Core.*;
&nbsp;import static mindustry.Vars.*;
&nbsp;
&nbsp;public class SettingsMenuDialog extends BaseDialog{
&nbsp;    public SettingsTable graphics;
&nbsp;    public SettingsTable game;
&nbsp;    public SettingsTable sound;
&nbsp;    public SettingsTable main;
&nbsp;
&nbsp;    private Table prefs;
&nbsp;    private Table menu;
&nbsp;    private BaseDialog dataDialog;
<b class="nc">&nbsp;    private Seq&lt;SettingsCategory&gt; categories = new Seq&lt;&gt;();</b>
&nbsp;
&nbsp;    public SettingsMenuDialog(){
<b class="nc">&nbsp;        super(bundle.get(&quot;settings&quot;, &quot;Settings&quot;));</b>
<b class="nc">&nbsp;        addCloseButton();</b>
&nbsp;
<b class="nc">&nbsp;        cont.add(main = new SettingsTable());</b>
<b class="nc">&nbsp;        shouldPause = true;</b>
&nbsp;
<b class="nc">&nbsp;        shown(() -&gt; {</b>
<b class="nc">&nbsp;            back();</b>
<b class="nc">&nbsp;            rebuildMenu();</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        onResize(() -&gt; {</b>
<b class="nc">&nbsp;            graphics.rebuild();</b>
<b class="nc">&nbsp;            sound.rebuild();</b>
<b class="nc">&nbsp;            game.rebuild();</b>
<b class="nc">&nbsp;            updateScrollFocus();</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        cont.clearChildren();</b>
<b class="nc">&nbsp;        cont.remove();</b>
<b class="nc">&nbsp;        buttons.remove();</b>
&nbsp;
<b class="nc">&nbsp;        menu = new Table(Tex.button);</b>
&nbsp;
<b class="nc">&nbsp;        game = new SettingsTable();</b>
<b class="nc">&nbsp;        graphics = new SettingsTable();</b>
<b class="nc">&nbsp;        sound = new SettingsTable();</b>
&nbsp;
<b class="nc">&nbsp;        prefs = new Table();</b>
<b class="nc">&nbsp;        prefs.top();</b>
<b class="nc">&nbsp;        prefs.margin(14f);</b>
&nbsp;
<b class="nc">&nbsp;        rebuildMenu();</b>
&nbsp;
<b class="nc">&nbsp;        prefs.clearChildren();</b>
<b class="nc">&nbsp;        prefs.add(menu);</b>
&nbsp;
<b class="nc">&nbsp;        dataDialog = new BaseDialog(&quot;@settings.data&quot;);</b>
<b class="nc">&nbsp;        dataDialog.addCloseButton();</b>
&nbsp;
<b class="nc">&nbsp;        dataDialog.cont.table(Tex.button, t -&gt; {</b>
<b class="nc">&nbsp;            t.defaults().size(280f, 60f).left();</b>
<b class="nc">&nbsp;            TextButtonStyle style = Styles.flatt;</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@settings.cleardata&quot;, Icon.trash, style, () -&gt; ui.showConfirm(&quot;@confirm&quot;, &quot;@settings.clearall.confirm&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                ObjectMap&lt;String, Object&gt; map = new ObjectMap&lt;&gt;();</b>
<b class="nc">&nbsp;                for(String value : Core.settings.keys()){</b>
<b class="nc">&nbsp;                    if(value.contains(&quot;usid&quot;) || value.contains(&quot;uuid&quot;)){</b>
<b class="nc">&nbsp;                        map.put(value, Core.settings.get(value, null));</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                Core.settings.clear();</b>
<b class="nc">&nbsp;                Core.settings.putAll(map);</b>
&nbsp;
<b class="nc">&nbsp;                for(Fi file : dataDirectory.list()){</b>
<b class="nc">&nbsp;                    file.deleteDirectory();</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Core.app.exit();</b>
<b class="nc">&nbsp;            })).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@settings.clearsaves&quot;, Icon.trash, style, () -&gt; {</b>
<b class="nc">&nbsp;                ui.showConfirm(&quot;@confirm&quot;, &quot;@settings.clearsaves.confirm&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                    control.saves.deleteAll();</b>
&nbsp;                });
<b class="nc">&nbsp;            }).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@settings.clearresearch&quot;, Icon.trash, style, () -&gt; {</b>
<b class="nc">&nbsp;                ui.showConfirm(&quot;@confirm&quot;, &quot;@settings.clearresearch.confirm&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                    universe.clearLoadoutInfo();</b>
<b class="nc">&nbsp;                    for(TechNode node : TechTree.all){</b>
<b class="nc">&nbsp;                        node.reset();</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                    content.each(c -&gt; {</b>
<b class="nc">&nbsp;                        if(c instanceof UnlockableContent u){</b>
<b class="nc">&nbsp;                            u.clearUnlock();</b>
&nbsp;                        }
&nbsp;                    });
<b class="nc">&nbsp;                    settings.remove(&quot;unlocks&quot;);</b>
&nbsp;                });
<b class="nc">&nbsp;            }).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@settings.clearcampaignsaves&quot;, Icon.trash, style, () -&gt; {</b>
<b class="nc">&nbsp;                ui.showConfirm(&quot;@confirm&quot;, &quot;@settings.clearcampaignsaves.confirm&quot;, () -&gt; {</b>
<b class="nc">&nbsp;                    for(var planet : content.planets()){</b>
<b class="nc">&nbsp;                        for(var sec : planet.sectors){</b>
<b class="nc">&nbsp;                            sec.clearInfo();</b>
<b class="nc">&nbsp;                            if(sec.save != null){</b>
<b class="nc">&nbsp;                                sec.save.delete();</b>
<b class="nc">&nbsp;                                sec.save = null;</b>
&nbsp;                            }
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;
<b class="nc">&nbsp;                    for(var slot : control.saves.getSaveSlots().copy()){</b>
<b class="nc">&nbsp;                        if(slot.isSector()){</b>
<b class="nc">&nbsp;                            slot.delete();</b>
&nbsp;                        }
<b class="nc">&nbsp;                    }</b>
&nbsp;                });
<b class="nc">&nbsp;            }).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@data.export&quot;, Icon.upload, style, () -&gt; {</b>
<b class="nc">&nbsp;                if(ios){</b>
<b class="nc">&nbsp;                    Fi file = Core.files.local(&quot;mindustry-data-export.zip&quot;);</b>
&nbsp;                    try{
<b class="nc">&nbsp;                        exportData(file);</b>
<b class="nc">&nbsp;                    }catch(Exception e){</b>
<b class="nc">&nbsp;                        ui.showException(e);</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                    platform.shareFile(file);</b>
<b class="nc">&nbsp;                }else{</b>
<b class="nc">&nbsp;                    platform.showFileChooser(false, &quot;zip&quot;, file -&gt; {</b>
&nbsp;                        try{
<b class="nc">&nbsp;                            exportData(file);</b>
<b class="nc">&nbsp;                            ui.showInfo(&quot;@data.exported&quot;);</b>
<b class="nc">&nbsp;                        }catch(Exception e){</b>
<b class="nc">&nbsp;                            e.printStackTrace();</b>
<b class="nc">&nbsp;                            ui.showException(e);</b>
<b class="nc">&nbsp;                        }</b>
&nbsp;                    });
&nbsp;                }
<b class="nc">&nbsp;            }).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@data.import&quot;, Icon.download, style, () -&gt; ui.showConfirm(&quot;@confirm&quot;, &quot;@data.import.confirm&quot;, () -&gt; platform.showFileChooser(true, &quot;zip&quot;, file -&gt; {</b>
&nbsp;                try{
<b class="nc">&nbsp;                    importData(file);</b>
<b class="nc">&nbsp;                    control.saves.resetSave();</b>
<b class="nc">&nbsp;                    state = new GameState();</b>
<b class="nc">&nbsp;                    Core.app.exit();</b>
<b class="nc">&nbsp;                }catch(IllegalArgumentException e){</b>
<b class="nc">&nbsp;                    ui.showErrorMessage(&quot;@data.invalid&quot;);</b>
<b class="nc">&nbsp;                }catch(Exception e){</b>
<b class="nc">&nbsp;                    e.printStackTrace();</b>
<b class="nc">&nbsp;                    if(e.getMessage() == null || !e.getMessage().contains(&quot;too short&quot;)){</b>
<b class="nc">&nbsp;                        ui.showException(e);</b>
&nbsp;                    }else{
<b class="nc">&nbsp;                        ui.showErrorMessage(&quot;@data.invalid&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }))).marginLeft(4);</b>
&nbsp;
<b class="nc">&nbsp;            if(!mobile){</b>
<b class="nc">&nbsp;                t.row();</b>
<b class="nc">&nbsp;                t.button(&quot;@data.openfolder&quot;, Icon.folder, style, () -&gt; Core.app.openFolder(Core.settings.getDataDirectory().absolutePath())).marginLeft(4);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            t.row();</b>
&nbsp;
<b class="nc">&nbsp;            t.button(&quot;@crash.export&quot;, Icon.upload, style, () -&gt; {</b>
<b class="nc">&nbsp;                if(settings.getDataDirectory().child(&quot;crashes&quot;).list().length == 0 &amp;&amp; !settings.getDataDirectory().child(&quot;last_log.txt&quot;).exists()){</b>
<b class="nc">&nbsp;                    ui.showInfo(&quot;@crash.none&quot;);</b>
&nbsp;                }else{
<b class="nc">&nbsp;                    if(ios){</b>
<b class="nc">&nbsp;                        Fi logs = tmpDirectory.child(&quot;logs.txt&quot;);</b>
<b class="nc">&nbsp;                        logs.writeString(getLogs());</b>
<b class="nc">&nbsp;                        platform.shareFile(logs);</b>
<b class="nc">&nbsp;                    }else{</b>
<b class="nc">&nbsp;                        platform.showFileChooser(false, &quot;txt&quot;, file -&gt; {</b>
&nbsp;                            try{
<b class="nc">&nbsp;                                file.writeBytes(getLogs().getBytes(Strings.utf8));</b>
<b class="nc">&nbsp;                                app.post(() -&gt; ui.showInfo(&quot;@crash.exported&quot;));</b>
<b class="nc">&nbsp;                            }catch(Throwable e){</b>
<b class="nc">&nbsp;                                ui.showException(e);</b>
<b class="nc">&nbsp;                            }</b>
&nbsp;                        });
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            }).marginLeft(4);</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        row();</b>
<b class="nc">&nbsp;        pane(prefs).grow().top();</b>
<b class="nc">&nbsp;        row();</b>
<b class="nc">&nbsp;        add(buttons).fillX();</b>
&nbsp;
<b class="nc">&nbsp;        addSettings();</b>
&nbsp;    }
&nbsp;
&nbsp;    String getLogs(){
<b class="nc">&nbsp;        Fi log = settings.getDataDirectory().child(&quot;last_log.txt&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        StringBuilder out = new StringBuilder();</b>
<b class="nc">&nbsp;        for(Fi fi : settings.getDataDirectory().child(&quot;crashes&quot;).list()){</b>
<b class="nc">&nbsp;            out.append(fi.name()).append(&quot;\n\n&quot;).append(fi.readString()).append(&quot;\n&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(log.exists()){</b>
<b class="nc">&nbsp;            out.append(&quot;\nlast log:\n&quot;).append(log.readString());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return out.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Adds a custom settings category, with the icon being the specified region. */
&nbsp;    public void addCategory(String name, @Nullable String region, Cons&lt;SettingsTable&gt; builder){
<b class="nc">&nbsp;        categories.add(new SettingsCategory(name, region == null ? null : new TextureRegionDrawable(atlas.find(region)), builder));</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Adds a custom settings category, for use in mods. The specified consumer should add all relevant mod settings to the table. */
&nbsp;    public void addCategory(String name, @Nullable Drawable icon, Cons&lt;SettingsTable&gt; builder){
<b class="nc">&nbsp;        categories.add(new SettingsCategory(name, icon, builder));</b>
&nbsp;    }
&nbsp;
&nbsp;    /** Adds a custom settings category, for use in mods. The specified consumer should add all relevant mod settings to the table. */
&nbsp;    public void addCategory(String name, Cons&lt;SettingsTable&gt; builder){
<b class="nc">&nbsp;        addCategory(name, (Drawable)null, builder);</b>
&nbsp;    }
&nbsp;
&nbsp;    public Seq&lt;SettingsCategory&gt; getCategories(){
<b class="nc">&nbsp;        return categories;</b>
&nbsp;    }
&nbsp;
&nbsp;    void rebuildMenu(){
<b class="nc">&nbsp;        menu.clearChildren();</b>
&nbsp;
<b class="nc">&nbsp;        TextButtonStyle style = Styles.flatt;</b>
&nbsp;
<b class="nc">&nbsp;        float marg = 8f, isize = iconMed;</b>
&nbsp;
<b class="nc">&nbsp;        menu.defaults().size(300f, 60f);</b>
<b class="nc">&nbsp;        menu.button(&quot;@settings.game&quot;, Icon.settings, style, isize, () -&gt; visible(0)).marginLeft(marg).row();</b>
<b class="nc">&nbsp;        menu.button(&quot;@settings.graphics&quot;, Icon.image, style, isize, () -&gt; visible(1)).marginLeft(marg).row();</b>
<b class="nc">&nbsp;        menu.button(&quot;@settings.sound&quot;, Icon.filters, style, isize, () -&gt; visible(2)).marginLeft(marg).row();</b>
<b class="nc">&nbsp;        menu.button(&quot;@settings.language&quot;, Icon.chat, style, isize, ui.language::show).marginLeft(marg).row();</b>
<b class="nc">&nbsp;        if(!mobile || Core.settings.getBool(&quot;keyboard&quot;)){</b>
<b class="nc">&nbsp;            menu.button(&quot;@settings.controls&quot;, Icon.move, style, isize, ui.controls::show).marginLeft(marg).row();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        menu.button(&quot;@settings.data&quot;, Icon.save, style, isize, () -&gt; dataDialog.show()).marginLeft(marg).row();</b>
&nbsp;
<b class="nc">&nbsp;        int i = 3;</b>
<b class="nc">&nbsp;        for(var cat : categories){</b>
<b class="nc">&nbsp;            int index = i;</b>
<b class="nc">&nbsp;            if(cat.icon == null){</b>
<b class="nc">&nbsp;                menu.button(cat.name, style, () -&gt; visible(index)).marginLeft(marg).row();</b>
&nbsp;            }else{
<b class="nc">&nbsp;                menu.button(cat.name, cat.icon, style, isize, () -&gt; visible(index)).with(b -&gt; ((Image)b.getChildren().get(1)).setScaling(Scaling.fit)).marginLeft(marg).row();</b>
&nbsp;            }
<b class="nc">&nbsp;            i++;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    void addSettings(){
<b class="nc">&nbsp;        sound.checkPref(&quot;alwaysmusic&quot;, false);</b>
<b class="nc">&nbsp;        sound.sliderPref(&quot;musicvol&quot;, 100, 0, 100, 1, i -&gt; i + &quot;%&quot;);</b>
<b class="nc">&nbsp;        sound.sliderPref(&quot;sfxvol&quot;, 100, 0, 100, 1, i -&gt; i + &quot;%&quot;);</b>
<b class="nc">&nbsp;        sound.sliderPref(&quot;ambientvol&quot;, 100, 0, 100, 1, i -&gt; i + &quot;%&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        game.sliderPref(&quot;saveinterval&quot;, 60, 10, 5 * 120, 10, i -&gt; Core.bundle.format(&quot;setting.seconds&quot;, i));</b>
&nbsp;
<b class="nc">&nbsp;        if(mobile){</b>
<b class="nc">&nbsp;            game.checkPref(&quot;autotarget&quot;, true);</b>
<b class="nc">&nbsp;            if(!ios){</b>
<b class="nc">&nbsp;                game.checkPref(&quot;keyboard&quot;, false, val -&gt; {</b>
<b class="nc">&nbsp;                    control.setInput(val ? new DesktopInput() : new MobileInput());</b>
<b class="nc">&nbsp;                    input.setUseKeyboard(val);</b>
&nbsp;                });
<b class="nc">&nbsp;                if(Core.settings.getBool(&quot;keyboard&quot;)){</b>
<b class="nc">&nbsp;                    control.setInput(new DesktopInput());</b>
<b class="nc">&nbsp;                    input.setUseKeyboard(true);</b>
&nbsp;                }
&nbsp;            }else{
<b class="nc">&nbsp;                Core.settings.put(&quot;keyboard&quot;, false);</b>
&nbsp;            }
&nbsp;        }
&nbsp;        //the issue with touchscreen support on desktop is that:
&nbsp;        //1) I can&#39;t test it
&nbsp;        //2) the SDL backend doesn&#39;t support multitouch
&nbsp;        /*else{
&nbsp;            game.checkPref(&quot;touchscreen&quot;, false, val -&gt; control.setInput(!val ? new DesktopInput() : new MobileInput()));
&nbsp;            if(Core.settings.getBool(&quot;touchscreen&quot;)){
&nbsp;                control.setInput(new MobileInput());
&nbsp;            }
&nbsp;        }*/
&nbsp;
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            game.checkPref(&quot;crashreport&quot;, true);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        game.checkPref(&quot;savecreate&quot;, true);</b>
<b class="nc">&nbsp;        game.checkPref(&quot;blockreplace&quot;, true);</b>
<b class="nc">&nbsp;        game.checkPref(&quot;conveyorpathfinding&quot;, true);</b>
<b class="nc">&nbsp;        game.checkPref(&quot;hints&quot;, true);</b>
<b class="nc">&nbsp;        game.checkPref(&quot;logichints&quot;, true);</b>
&nbsp;
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            game.checkPref(&quot;backgroundpause&quot;, true);</b>
<b class="nc">&nbsp;            game.checkPref(&quot;buildautopause&quot;, false);</b>
<b class="nc">&nbsp;            game.checkPref(&quot;distinctcontrolgroups&quot;, true);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        game.checkPref(&quot;doubletapmine&quot;, false);</b>
<b class="nc">&nbsp;        game.checkPref(&quot;commandmodehold&quot;, true);</b>
&nbsp;
<b class="nc">&nbsp;        if(!ios){</b>
<b class="nc">&nbsp;            game.checkPref(&quot;modcrashdisable&quot;, true);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(steam){</b>
<b class="nc">&nbsp;            game.sliderPref(&quot;playerlimit&quot;, 16, 2, 32, i -&gt; {</b>
<b class="nc">&nbsp;                platform.updateLobby();</b>
<b class="nc">&nbsp;                return i + &quot;&quot;;</b>
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            if(!Version.modifier.contains(&quot;beta&quot;)){</b>
<b class="nc">&nbsp;                game.checkPref(&quot;steampublichost&quot;, false, i -&gt; {</b>
<b class="nc">&nbsp;                    platform.updateLobby();</b>
&nbsp;                });
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            game.checkPref(&quot;console&quot;, false);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int[] lastUiScale = {settings.getInt(&quot;uiscale&quot;, 100)};</b>
&nbsp;
<b class="nc">&nbsp;        graphics.sliderPref(&quot;uiscale&quot;, 100, 25, 300, 5, s -&gt; {</b>
&nbsp;            //if the user changed their UI scale, but then put it back, don&#39;t consider it &#39;changed&#39;
<b class="nc">&nbsp;            Core.settings.put(&quot;uiscalechanged&quot;, s != lastUiScale[0]);</b>
<b class="nc">&nbsp;            return s + &quot;%&quot;;</b>
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        graphics.sliderPref(&quot;screenshake&quot;, 4, 0, 8, i -&gt; (i / 4f) + &quot;x&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        graphics.sliderPref(&quot;bloomintensity&quot;, 6, 0, 16, i -&gt; (int)(i/4f * 100f) + &quot;%&quot;);</b>
<b class="nc">&nbsp;        graphics.sliderPref(&quot;bloomblur&quot;, 2, 1, 16, i -&gt; i + &quot;x&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        graphics.sliderPref(&quot;fpscap&quot;, 240, 10, 245, 5, s -&gt; (s &gt; 240 ? Core.bundle.get(&quot;setting.fpscap.none&quot;) : Core.bundle.format(&quot;setting.fpscap.text&quot;, s)));</b>
<b class="nc">&nbsp;        graphics.sliderPref(&quot;chatopacity&quot;, 100, 0, 100, 5, s -&gt; s + &quot;%&quot;);</b>
<b class="nc">&nbsp;        graphics.sliderPref(&quot;lasersopacity&quot;, 100, 0, 100, 5, s -&gt; {</b>
<b class="nc">&nbsp;            if(ui.settings != null){</b>
<b class="nc">&nbsp;                Core.settings.put(&quot;preferredlaseropacity&quot;, s);</b>
&nbsp;            }
<b class="nc">&nbsp;            return s + &quot;%&quot;;</b>
&nbsp;        });
<b class="nc">&nbsp;        graphics.sliderPref(&quot;bridgeopacity&quot;, 100, 0, 100, 5, s -&gt; s + &quot;%&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;vsync&quot;, true, b -&gt; Core.graphics.setVSync(b));</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;fullscreen&quot;, false, b -&gt; {</b>
<b class="nc">&nbsp;                if(b &amp;&amp; settings.getBool(&quot;borderlesswindow&quot;)){</b>
<b class="nc">&nbsp;                    Core.graphics.setWindowedMode(Core.graphics.getWidth(), Core.graphics.getHeight());</b>
<b class="nc">&nbsp;                    settings.put(&quot;borderlesswindow&quot;, false);</b>
<b class="nc">&nbsp;                    graphics.rebuild();</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if(b){</b>
<b class="nc">&nbsp;                    Core.graphics.setFullscreen();</b>
&nbsp;                }else{
<b class="nc">&nbsp;                    Core.graphics.setWindowedMode(Core.graphics.getWidth(), Core.graphics.getHeight());</b>
&nbsp;                }
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            graphics.checkPref(&quot;borderlesswindow&quot;, false, b -&gt; {</b>
<b class="nc">&nbsp;                if(b &amp;&amp; settings.getBool(&quot;fullscreen&quot;)){</b>
<b class="nc">&nbsp;                    Core.graphics.setWindowedMode(Core.graphics.getWidth(), Core.graphics.getHeight());</b>
<b class="nc">&nbsp;                    settings.put(&quot;fullscreen&quot;, false);</b>
<b class="nc">&nbsp;                    graphics.rebuild();</b>
&nbsp;                }
<b class="nc">&nbsp;                Core.graphics.setBorderless(b);</b>
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            Core.graphics.setVSync(Core.settings.getBool(&quot;vsync&quot;));</b>
&nbsp;
<b class="nc">&nbsp;            if(Core.settings.getBool(&quot;fullscreen&quot;)){</b>
<b class="nc">&nbsp;                Core.app.post(() -&gt; Core.graphics.setFullscreen());</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if(Core.settings.getBool(&quot;borderlesswindow&quot;)){</b>
<b class="nc">&nbsp;                Core.app.post(() -&gt; Core.graphics.setBorderless(true));</b>
&nbsp;            }
<b class="nc">&nbsp;        }else if(!ios){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;landscape&quot;, false, b -&gt; {</b>
<b class="nc">&nbsp;                if(b){</b>
<b class="nc">&nbsp;                    platform.beginForceLandscape();</b>
&nbsp;                }else{
<b class="nc">&nbsp;                    platform.endForceLandscape();</b>
&nbsp;                }
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            if(Core.settings.getBool(&quot;landscape&quot;)){</b>
<b class="nc">&nbsp;                platform.beginForceLandscape();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        graphics.checkPref(&quot;effects&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;atmosphere&quot;, !mobile);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;drawlight&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;destroyedblocks&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;blockstatus&quot;, false);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;playerchat&quot;, true);</b>
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;coreitems&quot;, true);</b>
&nbsp;        }
<b class="nc">&nbsp;        graphics.checkPref(&quot;minimap&quot;, !mobile);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;smoothcamera&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;position&quot;, false);</b>
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;mouseposition&quot;, false);</b>
&nbsp;        }
<b class="nc">&nbsp;        graphics.checkPref(&quot;fps&quot;, false);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;playerindicators&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;indicators&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;showweather&quot;, true);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;animatedwater&quot;, true);</b>
&nbsp;
<b class="nc">&nbsp;        if(Shaders.shield != null){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;animatedshields&quot;, !mobile);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        graphics.checkPref(&quot;bloom&quot;, true, val -&gt; renderer.toggleBloom(val));</b>
&nbsp;
<b class="nc">&nbsp;        graphics.checkPref(&quot;pixelate&quot;, false, val -&gt; {</b>
<b class="nc">&nbsp;            if(val){</b>
<b class="nc">&nbsp;                Events.fire(Trigger.enablePixelation);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
&nbsp;        //iOS (and possibly Android) devices do not support linear filtering well, so disable it
<b class="nc">&nbsp;        if(!ios){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;linear&quot;, !mobile, b -&gt; {</b>
<b class="nc">&nbsp;                for(Texture tex : Core.atlas.getTextures()){</b>
<b class="nc">&nbsp;                    TextureFilter filter = b ? TextureFilter.linear : TextureFilter.nearest;</b>
<b class="nc">&nbsp;                    tex.setFilter(filter, filter);</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }else{
<b class="nc">&nbsp;            settings.put(&quot;linear&quot;, false);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(Core.settings.getBool(&quot;linear&quot;)){</b>
<b class="nc">&nbsp;            for(Texture tex : Core.atlas.getTextures()){</b>
<b class="nc">&nbsp;                TextureFilter filter = TextureFilter.linear;</b>
<b class="nc">&nbsp;                tex.setFilter(filter, filter);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        graphics.checkPref(&quot;skipcoreanimation&quot;, false);</b>
<b class="nc">&nbsp;        graphics.checkPref(&quot;hidedisplays&quot;, false);</b>
&nbsp;
<b class="nc">&nbsp;        if(OS.isMac){</b>
<b class="nc">&nbsp;            graphics.checkPref(&quot;macnotch&quot;, false);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(!mobile){</b>
<b class="nc">&nbsp;            Core.settings.put(&quot;swapdiagonal&quot;, false);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void exportData(Fi file) throws IOException{
<b class="nc">&nbsp;        Seq&lt;Fi&gt; files = new Seq&lt;&gt;();</b>
<b class="nc">&nbsp;        files.add(Core.settings.getSettingsFile());</b>
<b class="nc">&nbsp;        files.addAll(customMapDirectory.list());</b>
<b class="nc">&nbsp;        files.addAll(saveDirectory.list());</b>
<b class="nc">&nbsp;        files.addAll(modDirectory.list());</b>
<b class="nc">&nbsp;        files.addAll(schematicDirectory.list());</b>
<b class="nc">&nbsp;        String base = Core.settings.getDataDirectory().path();</b>
&nbsp;
&nbsp;        //add directories
<b class="nc">&nbsp;        for(Fi other : files.copy()){</b>
<b class="nc">&nbsp;            Fi parent = other.parent();</b>
<b class="nc">&nbsp;            while(!files.contains(parent) &amp;&amp; !parent.equals(settings.getDataDirectory())){</b>
<b class="nc">&nbsp;                files.add(parent);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        try(OutputStream fos = file.write(false, 2048); ZipOutputStream zos = new ZipOutputStream(fos)){</b>
<b class="nc">&nbsp;            for(Fi add : files){</b>
<b class="nc">&nbsp;                String path = add.path().substring(base.length());</b>
<b class="nc">&nbsp;                if(add.isDirectory()) path += &quot;/&quot;;</b>
&nbsp;                //fix trailing / in path
<b class="nc">&nbsp;                path = path.startsWith(&quot;/&quot;) ? path.substring(1) : path;</b>
<b class="nc">&nbsp;                zos.putNextEntry(new ZipEntry(path));</b>
<b class="nc">&nbsp;                if(!add.isDirectory()){</b>
<b class="nc">&nbsp;                    try(var stream = add.read()){</b>
<b class="nc">&nbsp;                        Streams.copy(stream, zos);</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
<b class="nc">&nbsp;                zos.closeEntry();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public void importData(Fi file){
<b class="nc">&nbsp;        Fi dest = Core.files.local(&quot;zipdata.zip&quot;);</b>
<b class="nc">&nbsp;        file.copyTo(dest);</b>
<b class="nc">&nbsp;        Fi zipped = new ZipFi(dest);</b>
&nbsp;
<b class="nc">&nbsp;        Fi base = Core.settings.getDataDirectory();</b>
<b class="nc">&nbsp;        if(!zipped.child(&quot;settings.bin&quot;).exists()){</b>
<b class="nc">&nbsp;            throw new IllegalArgumentException(&quot;Not valid save data.&quot;);</b>
&nbsp;        }
&nbsp;
&nbsp;        //delete old saves so they don&#39;t interfere
<b class="nc">&nbsp;        saveDirectory.deleteDirectory();</b>
&nbsp;
&nbsp;        //purge existing tmp data, keep everything else
<b class="nc">&nbsp;        tmpDirectory.deleteDirectory();</b>
&nbsp;
<b class="nc">&nbsp;        zipped.walk(f -&gt; f.copyTo(base.child(f.path())));</b>
<b class="nc">&nbsp;        dest.delete();</b>
&nbsp;
&nbsp;        //clear old data
<b class="nc">&nbsp;        settings.clear();</b>
&nbsp;        //load data so it&#39;s saved on exit
<b class="nc">&nbsp;        settings.load();</b>
&nbsp;    }
&nbsp;
&nbsp;    private void back(){
<b class="nc">&nbsp;        rebuildMenu();</b>
<b class="nc">&nbsp;        prefs.clearChildren();</b>
<b class="nc">&nbsp;        prefs.add(menu);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void visible(int index){
<b class="nc">&nbsp;        prefs.clearChildren();</b>
&nbsp;
<b class="nc">&nbsp;        Seq&lt;Table&gt; tables = new Seq&lt;&gt;();</b>
<b class="nc">&nbsp;        tables.addAll(game, graphics, sound);</b>
<b class="nc">&nbsp;        for(var custom : categories){</b>
<b class="nc">&nbsp;            tables.add(custom.table);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        prefs.add(tables.get(index));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void addCloseButton(){
<b class="nc">&nbsp;        buttons.button(&quot;@back&quot;, Icon.left, () -&gt; {</b>
<b class="nc">&nbsp;            if(prefs.getChildren().first() != menu){</b>
<b class="nc">&nbsp;                back();</b>
&nbsp;            }else{
<b class="nc">&nbsp;                hide();</b>
&nbsp;            }
<b class="nc">&nbsp;        }).size(210f, 64f);</b>
&nbsp;
<b class="nc">&nbsp;        keyDown(key -&gt; {</b>
<b class="nc">&nbsp;            if(key == KeyCode.escape || key == KeyCode.back){</b>
<b class="nc">&nbsp;                if(prefs.getChildren().first() != menu){</b>
<b class="nc">&nbsp;                    back();</b>
&nbsp;                }else{
<b class="nc">&nbsp;                    hide();</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    public interface StringProcessor{
&nbsp;        String get(int i);
&nbsp;    }
&nbsp;
&nbsp;    public static class SettingsCategory{
&nbsp;        public String name;
&nbsp;        public @Nullable Drawable icon;
&nbsp;        public Cons&lt;SettingsTable&gt; builder;
&nbsp;        public SettingsTable table;
&nbsp;
<b class="nc">&nbsp;        public SettingsCategory(String name, Drawable icon, Cons&lt;SettingsTable&gt; builder){</b>
<b class="nc">&nbsp;            this.name = name;</b>
<b class="nc">&nbsp;            this.icon = icon;</b>
<b class="nc">&nbsp;            this.builder = builder;</b>
&nbsp;
<b class="nc">&nbsp;            table = new SettingsTable();</b>
<b class="nc">&nbsp;            builder.get(table);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static class SettingsTable extends Table{
<b class="nc">&nbsp;        protected Seq&lt;Setting&gt; list = new Seq&lt;&gt;();</b>
&nbsp;
<b class="nc">&nbsp;        public SettingsTable(){</b>
<b class="nc">&nbsp;            left();</b>
&nbsp;        }
&nbsp;
&nbsp;        public Seq&lt;Setting&gt; getSettings(){
<b class="nc">&nbsp;            return list;</b>
&nbsp;        }
&nbsp;
&nbsp;        public void pref(Setting setting){
<b class="nc">&nbsp;            list.add(setting);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public SliderSetting sliderPref(String name, int def, int min, int max, StringProcessor s){
<b class="nc">&nbsp;            return sliderPref(name, def, min, max, 1, s);</b>
&nbsp;        }
&nbsp;
&nbsp;        public SliderSetting sliderPref(String name, int def, int min, int max, int step, StringProcessor s){
&nbsp;            SliderSetting res;
<b class="nc">&nbsp;            list.add(res = new SliderSetting(name, def, min, max, step, s));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
<b class="nc">&nbsp;            return res;</b>
&nbsp;        }
&nbsp;
&nbsp;        public void checkPref(String name, boolean def){
<b class="nc">&nbsp;            list.add(new CheckSetting(name, def, null));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void checkPref(String name, boolean def, Boolc changed){
<b class="nc">&nbsp;            list.add(new CheckSetting(name, def, changed));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void textPref(String name, String def){
<b class="nc">&nbsp;            list.add(new TextSetting(name, def, null));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void textPref(String name, String def, Cons&lt;String&gt; changed){
<b class="nc">&nbsp;            list.add(new TextSetting(name, def, changed));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void areaTextPref(String name, String def){
<b class="nc">&nbsp;            list.add(new AreaTextSetting(name, def, null));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void areaTextPref(String name, String def, Cons&lt;String&gt; changed){
<b class="nc">&nbsp;            list.add(new AreaTextSetting(name, def, changed));</b>
<b class="nc">&nbsp;            settings.defaults(name, def);</b>
<b class="nc">&nbsp;            rebuild();</b>
&nbsp;        }
&nbsp;
&nbsp;        public void rebuild(){
<b class="nc">&nbsp;            clearChildren();</b>
&nbsp;
<b class="nc">&nbsp;            for(Setting setting : list){</b>
<b class="nc">&nbsp;                setting.add(this);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            button(bundle.get(&quot;settings.reset&quot;, &quot;Reset to Defaults&quot;), () -&gt; {</b>
<b class="nc">&nbsp;                for(Setting setting : list){</b>
<b class="nc">&nbsp;                    if(setting.name == null || setting.title == null) continue;</b>
<b class="nc">&nbsp;                    settings.remove(setting.name);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                rebuild();</b>
<b class="nc">&nbsp;            }).margin(14).width(240f).pad(6);</b>
&nbsp;        }
&nbsp;
&nbsp;        public abstract static class Setting{
&nbsp;            public String name;
&nbsp;            public String title;
&nbsp;            public @Nullable String description;
&nbsp;
<b class="nc">&nbsp;            public Setting(String name){</b>
<b class="nc">&nbsp;                this.name = name;</b>
<b class="nc">&nbsp;                String winkey = &quot;setting.&quot; + name + &quot;.name.windows&quot;;</b>
<b class="nc">&nbsp;                title = OS.isWindows &amp;&amp; bundle.has(winkey) ? bundle.get(winkey) : bundle.get(&quot;setting.&quot; + name + &quot;.name&quot;, name);</b>
<b class="nc">&nbsp;                description = bundle.getOrNull(&quot;setting.&quot; + name + &quot;.description&quot;);</b>
&nbsp;            }
&nbsp;
&nbsp;            public abstract void add(SettingsTable table);
&nbsp;
&nbsp;            public void addDesc(Element elem){
<b class="nc">&nbsp;                ui.addDescTooltip(elem, description);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public static class CheckSetting extends Setting{
&nbsp;            boolean def;
&nbsp;            Boolc changed;
&nbsp;
&nbsp;            public CheckSetting(String name, boolean def, Boolc changed){
<b class="nc">&nbsp;                super(name);</b>
<b class="nc">&nbsp;                this.def = def;</b>
<b class="nc">&nbsp;                this.changed = changed;</b>
&nbsp;            }
&nbsp;
&nbsp;            @Override
&nbsp;            public void add(SettingsTable table){
<b class="nc">&nbsp;                CheckBox box = new CheckBox(title);</b>
&nbsp;
<b class="nc">&nbsp;                box.update(() -&gt; box.setChecked(settings.getBool(name)));</b>
&nbsp;
<b class="nc">&nbsp;                box.changed(() -&gt; {</b>
<b class="nc">&nbsp;                    settings.put(name, box.isChecked());</b>
<b class="nc">&nbsp;                    if(changed != null){</b>
<b class="nc">&nbsp;                        changed.get(box.isChecked());</b>
&nbsp;                    }
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                box.left();</b>
<b class="nc">&nbsp;                addDesc(table.add(box).left().padTop(3f).get());</b>
<b class="nc">&nbsp;                table.row();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public static class SliderSetting extends Setting{
&nbsp;            int def, min, max, step;
&nbsp;            StringProcessor sp;
&nbsp;
&nbsp;            public SliderSetting(String name, int def, int min, int max, int step, StringProcessor s){
<b class="nc">&nbsp;                super(name);</b>
<b class="nc">&nbsp;                this.def = def;</b>
<b class="nc">&nbsp;                this.min = min;</b>
<b class="nc">&nbsp;                this.max = max;</b>
<b class="nc">&nbsp;                this.step = step;</b>
<b class="nc">&nbsp;                this.sp = s;</b>
&nbsp;            }
&nbsp;
&nbsp;            @Override
&nbsp;            public void add(SettingsTable table){
<b class="nc">&nbsp;                Slider slider = new Slider(min, max, step, false);</b>
&nbsp;
<b class="nc">&nbsp;                slider.setValue(settings.getInt(name));</b>
&nbsp;
<b class="nc">&nbsp;                Label value = new Label(&quot;&quot;, Styles.outlineLabel);</b>
<b class="nc">&nbsp;                Table content = new Table();</b>
<b class="nc">&nbsp;                content.add(title, Styles.outlineLabel).left().growX().wrap();</b>
<b class="nc">&nbsp;                content.add(value).padLeft(10f).right();</b>
<b class="nc">&nbsp;                content.margin(3f, 33f, 3f, 33f);</b>
<b class="nc">&nbsp;                content.touchable = Touchable.disabled;</b>
&nbsp;
<b class="nc">&nbsp;                slider.changed(() -&gt; {</b>
<b class="nc">&nbsp;                    settings.put(name, (int)slider.getValue());</b>
<b class="nc">&nbsp;                    value.setText(sp.get((int)slider.getValue()));</b>
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                slider.change();</b>
&nbsp;
<b class="nc">&nbsp;                addDesc(table.stack(slider, content).width(Math.min(Core.graphics.getWidth() / 1.2f, 460f)).left().padTop(4f).get());</b>
<b class="nc">&nbsp;                table.row();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public static class TextSetting extends Setting{
&nbsp;            String def;
&nbsp;            Cons&lt;String&gt; changed;
&nbsp;
&nbsp;            public TextSetting(String name, String def, Cons&lt;String&gt; changed){
<b class="nc">&nbsp;                super(name);</b>
<b class="nc">&nbsp;                this.def = def;</b>
<b class="nc">&nbsp;                this.changed = changed;</b>
&nbsp;            }
&nbsp;
&nbsp;            @Override
&nbsp;            public void add(SettingsTable table){
<b class="nc">&nbsp;                TextField field = new TextField();</b>
&nbsp;
<b class="nc">&nbsp;                field.update(() -&gt; field.setText(settings.getString(name)));</b>
&nbsp;
<b class="nc">&nbsp;                field.changed(() -&gt; {</b>
<b class="nc">&nbsp;                    settings.put(name, field.getText());</b>
<b class="nc">&nbsp;                    if(changed != null){</b>
<b class="nc">&nbsp;                        changed.get(field.getText());</b>
&nbsp;                    }
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                Table prefTable = table.table().left().padTop(3f).get();</b>
<b class="nc">&nbsp;                prefTable.add(field);</b>
<b class="nc">&nbsp;                prefTable.label(() -&gt; title);</b>
<b class="nc">&nbsp;                addDesc(prefTable);</b>
<b class="nc">&nbsp;                table.row();</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        public static class AreaTextSetting extends TextSetting{
&nbsp;            public AreaTextSetting(String name, String def, Cons&lt;String&gt; changed){
<b class="nc">&nbsp;                super(name, def, changed);</b>
&nbsp;            }
&nbsp;
&nbsp;            @Override
&nbsp;            public void add(SettingsTable table){
<b class="nc">&nbsp;                TextArea area = new TextArea(&quot;&quot;);</b>
<b class="nc">&nbsp;                area.setPrefRows(5);</b>
&nbsp;
<b class="nc">&nbsp;                area.update(() -&gt; {</b>
<b class="nc">&nbsp;                    area.setText(settings.getString(name));</b>
<b class="nc">&nbsp;                    area.setWidth(table.getWidth());</b>
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                area.changed(() -&gt; {</b>
<b class="nc">&nbsp;                    settings.put(name, area.getText());</b>
<b class="nc">&nbsp;                    if(changed != null){</b>
<b class="nc">&nbsp;                        changed.get(area.getText());</b>
&nbsp;                    }
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                addDesc(table.label(() -&gt; title).left().padTop(3f).get());</b>
<b class="nc">&nbsp;                table.row().add(area).left();</b>
<b class="nc">&nbsp;                table.row();</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-10-10 13:22</div>
</div>
</body>
</html>
