


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > CustomRulesDialog</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">mindustry.ui.dialogs</a>
</div>

<h1>Coverage Summary for Class: CustomRulesDialog (mindustry.ui.dialogs)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">CustomRulesDialog</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/63)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/387)
  </span>
</td>
</tr>
  <tr>
    <td class="name">CustomRulesDialog$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/64)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/389)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package mindustry.ui.dialogs;
&nbsp;
&nbsp;import arc.*;
&nbsp;import arc.func.*;
&nbsp;import arc.graphics.*;
&nbsp;import arc.scene.style.*;
&nbsp;import arc.scene.ui.*;
&nbsp;import arc.scene.ui.ImageButton.*;
&nbsp;import arc.scene.ui.layout.*;
&nbsp;import arc.struct.*;
&nbsp;import arc.util.*;
&nbsp;import mindustry.*;
&nbsp;import mindustry.content.*;
&nbsp;import mindustry.ctype.*;
&nbsp;import mindustry.game.*;
&nbsp;import mindustry.game.Rules.*;
&nbsp;import mindustry.gen.*;
&nbsp;import mindustry.graphics.*;
&nbsp;import mindustry.io.*;
&nbsp;import mindustry.type.*;
&nbsp;import mindustry.type.Weather.*;
&nbsp;import mindustry.ui.*;
&nbsp;import mindustry.world.*;
&nbsp;
&nbsp;import static arc.util.Time.*;
&nbsp;import static mindustry.Vars.*;
&nbsp;
&nbsp;public class CustomRulesDialog extends BaseDialog{
&nbsp;    Rules rules;
&nbsp;    private Table main;
&nbsp;    private Prov&lt;Rules&gt; resetter;
&nbsp;    private LoadoutDialog loadoutDialog;
&nbsp;
&nbsp;    public boolean showRuleEditRule;
&nbsp;    public Seq&lt;Table&gt; categories;
&nbsp;    public Table current;
&nbsp;    public Seq&lt;String&gt; categoryNames;
<b class="nc">&nbsp;    public String currentName = &quot;&quot;;</b>
<b class="nc">&nbsp;    public String ruleSearch = &quot;&quot;;</b>
&nbsp;    public Seq&lt;Runnable&gt; additionalSetup; // for modding to easily add new rules
&nbsp;
&nbsp;    public CustomRulesDialog(){
<b class="nc">&nbsp;        this(false);</b>
&nbsp;    }
&nbsp;
&nbsp;    public CustomRulesDialog(boolean showRuleEditRule){
<b class="nc">&nbsp;        super(&quot;@mode.custom&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        this.showRuleEditRule = showRuleEditRule;</b>
&nbsp;
<b class="nc">&nbsp;        loadoutDialog = new LoadoutDialog();</b>
&nbsp;
<b class="nc">&nbsp;        setFillParent(true);</b>
<b class="nc">&nbsp;        shown(this::setup);</b>
<b class="nc">&nbsp;        addCloseButton();</b>
&nbsp;
<b class="nc">&nbsp;        additionalSetup = new Seq&lt;&gt;();</b>
<b class="nc">&nbsp;        categories = new Seq&lt;&gt;();</b>
<b class="nc">&nbsp;        categoryNames = new Seq&lt;&gt;();</b>
&nbsp;
<b class="nc">&nbsp;        buttons.button(&quot;@edit&quot;, Icon.pencil, () -&gt; {</b>
<b class="nc">&nbsp;            BaseDialog dialog = new BaseDialog(&quot;@waves.edit&quot;);</b>
<b class="nc">&nbsp;            dialog.addCloseButton();</b>
<b class="nc">&nbsp;            dialog.setFillParent(false);</b>
&nbsp;
<b class="nc">&nbsp;            dialog.cont.table(Tex.button, t -&gt; {</b>
<b class="nc">&nbsp;                var style = Styles.cleart;</b>
<b class="nc">&nbsp;                t.defaults().size(280f, 64f).pad(2f);</b>
&nbsp;
<b class="nc">&nbsp;                t.button(&quot;@waves.copy&quot;, Icon.copy, style, () -&gt; {</b>
<b class="nc">&nbsp;                    ui.showInfoFade(&quot;@copied&quot;);</b>
&nbsp;
&nbsp;                    //hack: don&#39;t write the spawns, they just waste space
<b class="nc">&nbsp;                    var spawns = rules.spawns;</b>
<b class="nc">&nbsp;                    rules.spawns = new Seq&lt;&gt;();</b>
<b class="nc">&nbsp;                    Core.app.setClipboardText(JsonIO.write(rules));</b>
<b class="nc">&nbsp;                    rules.spawns = spawns;</b>
<b class="nc">&nbsp;                    dialog.hide();</b>
<b class="nc">&nbsp;                }).marginLeft(12f).row();</b>
&nbsp;
<b class="nc">&nbsp;                t.button(&quot;@waves.load&quot;, Icon.download, style, () -&gt; {</b>
&nbsp;                    try{
<b class="nc">&nbsp;                        Rules newRules = JsonIO.read(Rules.class, Core.app.getClipboardText());</b>
&nbsp;                        //objectives and spawns are considered to be map-specific; don&#39;t use them
<b class="nc">&nbsp;                        newRules.spawns = rules.spawns;</b>
<b class="nc">&nbsp;                        newRules.objectives = rules.objectives;</b>
<b class="nc">&nbsp;                        rules = newRules;</b>
<b class="nc">&nbsp;                        refresh();</b>
<b class="nc">&nbsp;                    }catch(Throwable e){</b>
<b class="nc">&nbsp;                        Log.err(e);</b>
<b class="nc">&nbsp;                        ui.showErrorMessage(&quot;@rules.invaliddata&quot;);</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                    dialog.hide();</b>
<b class="nc">&nbsp;                }).disabled(Core.app.getClipboardText() == null || !Core.app.getClipboardText().startsWith(&quot;{&quot;)).marginLeft(12f).row();</b>
&nbsp;
<b class="nc">&nbsp;                t.button(&quot;@settings.reset&quot;, Icon.refresh, style, () -&gt; {</b>
<b class="nc">&nbsp;                    rules = resetter.get();</b>
<b class="nc">&nbsp;                    refresh();</b>
<b class="nc">&nbsp;                }).marginLeft(12f);</b>
&nbsp;            });
&nbsp;
<b class="nc">&nbsp;            dialog.show();</b>
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    void refresh(){
<b class="nc">&nbsp;        setup();</b>
<b class="nc">&nbsp;        requestKeyboard();</b>
<b class="nc">&nbsp;        requestScroll();</b>
&nbsp;    }
&nbsp;
&nbsp;    private &lt;T extends UnlockableContent&gt; void showBanned(String title, ContentType type, ObjectSet&lt;T&gt; set, Boolf&lt;T&gt; pred){
<b class="nc">&nbsp;        BaseDialog bd = new BaseDialog(title);</b>
<b class="nc">&nbsp;        bd.addCloseButton();</b>
&nbsp;
<b class="nc">&nbsp;        Runnable[] rebuild = {null};</b>
&nbsp;
<b class="nc">&nbsp;        rebuild[0] = () -&gt; {</b>
<b class="nc">&nbsp;            float previousScroll = bd.cont.getChildren().isEmpty() ? 0f : ((ScrollPane)bd.cont.getChildren().first()).getScrollY();</b>
<b class="nc">&nbsp;            bd.cont.clear();</b>
<b class="nc">&nbsp;            bd.cont.pane(t -&gt; {</b>
<b class="nc">&nbsp;                t.margin(10f);</b>
&nbsp;
<b class="nc">&nbsp;                if(set.isEmpty()){</b>
<b class="nc">&nbsp;                    t.add(&quot;@empty&quot;);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Seq&lt;T&gt; array = set.toSeq();</b>
<b class="nc">&nbsp;                array.sort();</b>
&nbsp;
<b class="nc">&nbsp;                int cols = mobile &amp;&amp; Core.graphics.isPortrait() ? 1 : mobile ? 2 : 3;</b>
<b class="nc">&nbsp;                int i = 0;</b>
&nbsp;
<b class="nc">&nbsp;                for(T con : array){</b>
<b class="nc">&nbsp;                    t.table(Tex.underline, b -&gt; {</b>
<b class="nc">&nbsp;                        b.left().margin(4f);</b>
<b class="nc">&nbsp;                        b.image(con.uiIcon).size(iconMed).padRight(3);</b>
<b class="nc">&nbsp;                        b.add(con.localizedName).color(Color.lightGray).padLeft(3).growX().left().wrap();</b>
&nbsp;
<b class="nc">&nbsp;                        b.button(Icon.cancel, Styles.emptyi, () -&gt; {</b>
<b class="nc">&nbsp;                            set.remove(con);</b>
<b class="nc">&nbsp;                            rebuild[0].run();</b>
<b class="nc">&nbsp;                        }).size(70f).pad(-4f).padLeft(0f);</b>
<b class="nc">&nbsp;                    }).size(300f, 70f).padRight(5);</b>
&nbsp;
<b class="nc">&nbsp;                    if(++i % cols == 0){</b>
<b class="nc">&nbsp;                        t.row();</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }).get().setScrollYForce(previousScroll);</b>
<b class="nc">&nbsp;            bd.cont.row();</b>
<b class="nc">&nbsp;            bd.cont.button(&quot;@add&quot;, Icon.add, () -&gt; {</b>
<b class="nc">&nbsp;                BaseDialog dialog = new BaseDialog(&quot;@add&quot;);</b>
<b class="nc">&nbsp;                dialog.cont.pane(t -&gt; {</b>
<b class="nc">&nbsp;                    t.left().margin(14f);</b>
<b class="nc">&nbsp;                    int[] i = {0};</b>
<b class="nc">&nbsp;                    content.&lt;T&gt;getBy(type).each(b -&gt; !set.contains(b) &amp;&amp; pred.get(b), b -&gt; {</b>
<b class="nc">&nbsp;                        int cols = mobile &amp;&amp; Core.graphics.isPortrait() ? 4 : 12;</b>
<b class="nc">&nbsp;                        t.button(new TextureRegionDrawable(b.uiIcon), Styles.flati, iconMed, () -&gt; {</b>
<b class="nc">&nbsp;                            set.add(b);</b>
<b class="nc">&nbsp;                            rebuild[0].run();</b>
<b class="nc">&nbsp;                            dialog.hide();</b>
<b class="nc">&nbsp;                        }).size(60f).tooltip(b.localizedName);</b>
&nbsp;
<b class="nc">&nbsp;                        if(++i[0] % cols == 0){</b>
<b class="nc">&nbsp;                            t.row();</b>
&nbsp;                        }
&nbsp;                    });
&nbsp;                });
&nbsp;
<b class="nc">&nbsp;                dialog.addCloseButton();</b>
<b class="nc">&nbsp;                dialog.show();</b>
<b class="nc">&nbsp;            }).size(300f, 64f).disabled(b -&gt; set.size == content.&lt;T&gt;getBy(type).count(pred));</b>
&nbsp;        };
&nbsp;
<b class="nc">&nbsp;        bd.shown(rebuild[0]);</b>
<b class="nc">&nbsp;        bd.buttons.button(&quot;@addall&quot;, Icon.add, () -&gt; {</b>
<b class="nc">&nbsp;            set.addAll(content.&lt;T&gt;getBy(type).select(pred));</b>
<b class="nc">&nbsp;            rebuild[0].run();</b>
<b class="nc">&nbsp;        }).size(180, 64f);</b>
&nbsp;
<b class="nc">&nbsp;        bd.buttons.button(&quot;@clear&quot;, Icon.trash, () -&gt; {</b>
<b class="nc">&nbsp;            set.clear();</b>
<b class="nc">&nbsp;            rebuild[0].run();</b>
<b class="nc">&nbsp;        }).size(180, 64f);</b>
&nbsp;
<b class="nc">&nbsp;        bd.show();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void show(Rules rules, Prov&lt;Rules&gt; resetter){
<b class="nc">&nbsp;        this.rules = rules;</b>
<b class="nc">&nbsp;        this.resetter = resetter;</b>
<b class="nc">&nbsp;        show();</b>
&nbsp;    }
&nbsp;
&nbsp;    void setup(){
<b class="nc">&nbsp;        categories.clear();</b>
<b class="nc">&nbsp;        cont.clear();</b>
<b class="nc">&nbsp;        cont.table(t -&gt; {</b>
<b class="nc">&nbsp;            t.add(&quot;@search&quot;).padRight(10);</b>
<b class="nc">&nbsp;            var field = t.field(ruleSearch, text -&gt; {</b>
<b class="nc">&nbsp;                ruleSearch = text.trim().replaceAll(&quot; +&quot;, &quot; &quot;).toLowerCase();</b>
<b class="nc">&nbsp;                setup();</b>
<b class="nc">&nbsp;            }).grow().pad(8).get();</b>
<b class="nc">&nbsp;            field.setCursorPosition(ruleSearch.length());</b>
<b class="nc">&nbsp;            Core.scene.setKeyboardFocus(field);</b>
<b class="nc">&nbsp;            t.button(Icon.cancel, Styles.emptyi, () -&gt; {</b>
<b class="nc">&nbsp;                ruleSearch = &quot;&quot;;</b>
<b class="nc">&nbsp;                setup();</b>
<b class="nc">&nbsp;            }).padLeft(10f).size(35f);</b>
<b class="nc">&nbsp;            t.button(Icon.zoom, Styles.emptyi, this::setup).size(54f);</b>
<b class="nc">&nbsp;        }).row();</b>
<b class="nc">&nbsp;        cont.pane(m -&gt; main = m).scrollX(false);</b>
<b class="nc">&nbsp;        main.margin(10f);</b>
<b class="nc">&nbsp;        main.left().defaults().fillX().left();</b>
<b class="nc">&nbsp;        main.row();</b>
&nbsp;
<b class="nc">&nbsp;        category(&quot;waves&quot;);</b>
<b class="nc">&nbsp;        check(&quot;@rules.waves&quot;, b -&gt; rules.waves = b, () -&gt; rules.waves);</b>
<b class="nc">&nbsp;        check(&quot;@rules.wavesending&quot;, b -&gt; rules.waveSending = b, () -&gt; rules.waveSending, () -&gt; rules.waves);</b>
<b class="nc">&nbsp;        check(&quot;@rules.wavetimer&quot;, b -&gt; rules.waveTimer = b, () -&gt; rules.waveTimer, () -&gt; rules.waves);</b>
<b class="nc">&nbsp;        check(&quot;@rules.waitForWaveToEnd&quot;, b -&gt; rules.waitEnemies = b, () -&gt; rules.waitEnemies, () -&gt; rules.waves &amp;&amp; rules.waveTimer);</b>
<b class="nc">&nbsp;        check(&quot;@rules.randomwaveai&quot;, b -&gt; rules.randomWaveAI = b, () -&gt; rules.randomWaveAI, () -&gt; rules.waves);</b>
<b class="nc">&nbsp;        check(&quot;@rules.airUseSpawns&quot;, b -&gt; rules.airUseSpawns = b, () -&gt; rules.airUseSpawns, () -&gt; rules.waves);</b>
<b class="nc">&nbsp;        numberi(&quot;@rules.wavelimit&quot;, f -&gt; rules.winWave = f, () -&gt; rules.winWave, () -&gt; rules.waves, 0, Integer.MAX_VALUE);</b>
<b class="nc">&nbsp;        number(&quot;@rules.wavespacing&quot;, false, f -&gt; rules.waveSpacing = f * 60f, () -&gt; rules.waveSpacing / 60f, () -&gt; rules.waves &amp;&amp; rules.waveTimer, 1, Float.MAX_VALUE);</b>
&nbsp;        //this is experimental, because it&#39;s not clear that 0 makes it default.
<b class="nc">&nbsp;        if(experimental){</b>
<b class="nc">&nbsp;            number(&quot;@rules.initialwavespacing&quot;, false, f -&gt; rules.initialWaveSpacing = f * 60f, () -&gt; rules.initialWaveSpacing / 60f, () -&gt; rules.waves &amp;&amp; rules.waveTimer, 0, Float.MAX_VALUE);</b>
&nbsp;        }
<b class="nc">&nbsp;        number(&quot;@rules.dropzoneradius&quot;, false, f -&gt; rules.dropZoneRadius = f * tilesize, () -&gt; rules.dropZoneRadius / tilesize, () -&gt; rules.waves);</b>
&nbsp;
<b class="nc">&nbsp;        category(&quot;resourcesbuilding&quot;);</b>
<b class="nc">&nbsp;        check(&quot;@rules.alloweditworldprocessors&quot;, b -&gt; rules.allowEditWorldProcessors = b, () -&gt; rules.allowEditWorldProcessors);</b>
<b class="nc">&nbsp;        check(&quot;@rules.infiniteresources&quot;, b -&gt; rules.infiniteResources = b, () -&gt; rules.infiniteResources);</b>
<b class="nc">&nbsp;        check(&quot;@rules.onlydepositcore&quot;, b -&gt; rules.onlyDepositCore = b, () -&gt; rules.onlyDepositCore);</b>
<b class="nc">&nbsp;        check(&quot;@rules.derelictrepair&quot;, b -&gt; rules.derelictRepair = b, () -&gt; rules.derelictRepair);</b>
<b class="nc">&nbsp;        check(&quot;@rules.reactorexplosions&quot;, b -&gt; rules.reactorExplosions = b, () -&gt; rules.reactorExplosions);</b>
<b class="nc">&nbsp;        check(&quot;@rules.schematic&quot;, b -&gt; rules.schematicsAllowed = b, () -&gt; rules.schematicsAllowed);</b>
<b class="nc">&nbsp;        check(&quot;@rules.coreincinerates&quot;, b -&gt; rules.coreIncinerates = b, () -&gt; rules.coreIncinerates);</b>
<b class="nc">&nbsp;        check(&quot;@rules.cleanupdeadteams&quot;, b -&gt; rules.cleanupDeadTeams = b, () -&gt; rules.cleanupDeadTeams, () -&gt; rules.pvp);</b>
<b class="nc">&nbsp;        check(&quot;@rules.disableworldprocessors&quot;, b -&gt; rules.disableWorldProcessors = b, () -&gt; rules.disableWorldProcessors);</b>
<b class="nc">&nbsp;        number(&quot;@rules.buildcostmultiplier&quot;, false, f -&gt; rules.buildCostMultiplier = f, () -&gt; rules.buildCostMultiplier, () -&gt; !rules.infiniteResources);</b>
<b class="nc">&nbsp;        number(&quot;@rules.buildspeedmultiplier&quot;, f -&gt; rules.buildSpeedMultiplier = f, () -&gt; rules.buildSpeedMultiplier, 0.001f, 50f);</b>
<b class="nc">&nbsp;        number(&quot;@rules.deconstructrefundmultiplier&quot;, false, f -&gt; rules.deconstructRefundMultiplier = f, () -&gt; rules.deconstructRefundMultiplier, () -&gt; !rules.infiniteResources);</b>
<b class="nc">&nbsp;        number(&quot;@rules.blockhealthmultiplier&quot;, f -&gt; rules.blockHealthMultiplier = f, () -&gt; rules.blockHealthMultiplier);</b>
<b class="nc">&nbsp;        number(&quot;@rules.blockdamagemultiplier&quot;, f -&gt; rules.blockDamageMultiplier = f, () -&gt; rules.blockDamageMultiplier);</b>
&nbsp;
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;configure&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.button(&quot;@configure&quot;,</b>
<b class="nc">&nbsp;                () -&gt; loadoutDialog.show(999999, rules.loadout,</b>
<b class="nc">&nbsp;                    i -&gt; true,</b>
<b class="nc">&nbsp;                    () -&gt; rules.loadout.clear().add(new ItemStack(Items.copper, 100)),</b>
<b class="nc">&nbsp;                    () -&gt; {}, () -&gt; {}</b>
<b class="nc">&nbsp;            )).left().width(300f).row();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;bannedblocks&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.button(&quot;@bannedblocks&quot;, () -&gt; showBanned(&quot;@bannedblocks&quot;, ContentType.block, rules.bannedBlocks, Block::canBeBuilt)).left().width(300f).row();</b>
&nbsp;        }
<b class="nc">&nbsp;        check(&quot;@rules.hidebannedblocks&quot;, b -&gt; rules.hideBannedBlocks = b, () -&gt; rules.hideBannedBlocks);</b>
<b class="nc">&nbsp;        check(&quot;@bannedblocks.whitelist&quot;, b -&gt; rules.blockWhitelist = b, () -&gt; rules.blockWhitelist);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        category(&quot;unit&quot;);</b>
<b class="nc">&nbsp;        check(&quot;@rules.unitcapvariable&quot;, b -&gt; rules.unitCapVariable = b, () -&gt; rules.unitCapVariable);</b>
<b class="nc">&nbsp;        check(&quot;@rules.unitpayloadsexplode&quot;, b -&gt; rules.unitPayloadsExplode = b, () -&gt; rules.unitPayloadsExplode);</b>
<b class="nc">&nbsp;        numberi(&quot;@rules.unitcap&quot;, f -&gt; rules.unitCap = f, () -&gt; rules.unitCap, -999, 999);</b>
<b class="nc">&nbsp;        number(&quot;@rules.unitdamagemultiplier&quot;, f -&gt; rules.unitDamageMultiplier = f, () -&gt; rules.unitDamageMultiplier);</b>
<b class="nc">&nbsp;        number(&quot;@rules.unitcrashdamagemultiplier&quot;, f -&gt; rules.unitCrashDamageMultiplier = f, () -&gt; rules.unitCrashDamageMultiplier);</b>
<b class="nc">&nbsp;        number(&quot;@rules.unitbuildspeedmultiplier&quot;, f -&gt; rules.unitBuildSpeedMultiplier = f, () -&gt; rules.unitBuildSpeedMultiplier, 0f, 50f);</b>
<b class="nc">&nbsp;        number(&quot;@rules.unitcostmultiplier&quot;, f -&gt; rules.unitCostMultiplier = f, () -&gt; rules.unitCostMultiplier);</b>
<b class="nc">&nbsp;        number(&quot;@rules.unithealthmultiplier&quot;, f -&gt; rules.unitHealthMultiplier = f, () -&gt; rules.unitHealthMultiplier);</b>
&nbsp;
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;bannedunits&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.button(&quot;@bannedunits&quot;, () -&gt; showBanned(&quot;@bannedunits&quot;, ContentType.unit, rules.bannedUnits, u -&gt; !u.isHidden())).left().width(300f).row();</b>
&nbsp;        }
<b class="nc">&nbsp;        check(&quot;@bannedunits.whitelist&quot;, b -&gt; rules.unitWhitelist = b, () -&gt; rules.unitWhitelist);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        category(&quot;enemy&quot;);</b>
<b class="nc">&nbsp;        check(&quot;@rules.attack&quot;, b -&gt; rules.attackMode = b, () -&gt; rules.attackMode);</b>
<b class="nc">&nbsp;        check(&quot;@rules.corecapture&quot;, b -&gt; rules.coreCapture = b, () -&gt; rules.coreCapture);</b>
<b class="nc">&nbsp;        check(&quot;@rules.placerangecheck&quot;, b -&gt; rules.placeRangeCheck = b, () -&gt; rules.placeRangeCheck);</b>
<b class="nc">&nbsp;        check(&quot;@rules.polygoncoreprotection&quot;, b -&gt; rules.polygonCoreProtection = b, () -&gt; rules.polygonCoreProtection);</b>
<b class="nc">&nbsp;        number(&quot;@rules.enemycorebuildradius&quot;, f -&gt; rules.enemyCoreBuildRadius = f * tilesize, () -&gt; Math.min(rules.enemyCoreBuildRadius / tilesize, 200), () -&gt; !rules.polygonCoreProtection);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        category(&quot;environment&quot;);</b>
<b class="nc">&nbsp;        check(&quot;@rules.explosions&quot;, b -&gt; rules.damageExplosions = b, () -&gt; rules.damageExplosions);</b>
<b class="nc">&nbsp;        check(&quot;@rules.fire&quot;, b -&gt; rules.fire = b, () -&gt; rules.fire);</b>
<b class="nc">&nbsp;        check(&quot;@rules.fog&quot;, b -&gt; rules.fog = b, () -&gt; rules.fog);</b>
<b class="nc">&nbsp;        check(&quot;@rules.lighting&quot;, b -&gt; rules.lighting = b, () -&gt; rules.lighting);</b>
&nbsp;
<b class="nc">&nbsp;        if(experimental){</b>
<b class="nc">&nbsp;            check(&quot;@rules.limitarea&quot;, b -&gt; rules.limitMapArea = b, () -&gt; rules.limitMapArea);</b>
<b class="nc">&nbsp;            numberi(&quot;x&quot;, x -&gt; rules.limitX = x, () -&gt; rules.limitX, () -&gt; rules.limitMapArea, 0, 10000);</b>
<b class="nc">&nbsp;            numberi(&quot;y&quot;, y -&gt; rules.limitY = y, () -&gt; rules.limitY, () -&gt; rules.limitMapArea, 0, 10000);</b>
<b class="nc">&nbsp;            numberi(&quot;w&quot;, w -&gt; rules.limitWidth = w, () -&gt; rules.limitWidth, () -&gt; rules.limitMapArea, 0, 10000);</b>
<b class="nc">&nbsp;            numberi(&quot;h&quot;, h -&gt; rules.limitHeight = h, () -&gt; rules.limitHeight, () -&gt; rules.limitMapArea, 0, 10000);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        number(&quot;@rules.solarmultiplier&quot;, f -&gt; rules.solarMultiplier = f, () -&gt; rules.solarMultiplier);</b>
&nbsp;
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;rules.ambientlight&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.button(b -&gt; {</b>
<b class="nc">&nbsp;                b.left();</b>
<b class="nc">&nbsp;                b.table(Tex.pane, in -&gt; {</b>
<b class="nc">&nbsp;                    in.stack(new Image(Tex.alphaBg), new Image(Tex.whiteui){{</b>
<b class="nc">&nbsp;                        update(() -&gt; setColor(rules.ambientLight));</b>
<b class="nc">&nbsp;                    }}).grow();</b>
<b class="nc">&nbsp;                }).margin(4).size(50f).padRight(10);</b>
<b class="nc">&nbsp;                b.add(&quot;@rules.ambientlight&quot;);</b>
<b class="nc">&nbsp;            }, () -&gt; ui.picker.show(rules.ambientLight, rules.ambientLight::set)).left().width(250f).row();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;rules.weather&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.button(&quot;@rules.weather&quot;, this::weatherDialog).width(250f).left().row();</b>
&nbsp;        }
&nbsp;
&nbsp;
<b class="nc">&nbsp;        category(&quot;planet&quot;);</b>
<b class="nc">&nbsp;        if(Core.bundle.get(&quot;rules.title.planet&quot;).toLowerCase().contains(ruleSearch)){</b>
<b class="nc">&nbsp;            current.table(Tex.button, t -&gt; {</b>
<b class="nc">&nbsp;                t.margin(10f);</b>
<b class="nc">&nbsp;                var group = new ButtonGroup&lt;&gt;();</b>
<b class="nc">&nbsp;                var style = Styles.flatTogglet;</b>
&nbsp;
<b class="nc">&nbsp;                t.defaults().size(140f, 50f);</b>
&nbsp;
<b class="nc">&nbsp;                for(Planet planet : content.planets().select(p -&gt; p.accessible &amp;&amp; p.visible &amp;&amp; p.isLandable())){</b>
<b class="nc">&nbsp;                    t.button(planet.localizedName, style, () -&gt; {</b>
<b class="nc">&nbsp;                        planet.applyRules(rules, true);</b>
<b class="nc">&nbsp;                    }).group(group).checked(b -&gt; rules.planet == planet);</b>
&nbsp;
<b class="nc">&nbsp;                    if(t.getChildren().size % 3 == 0){</b>
<b class="nc">&nbsp;                        t.row();</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
&nbsp;
<b class="nc">&nbsp;                t.button(&quot;@rules.anyenv&quot;, style, () -&gt; {</b>
<b class="nc">&nbsp;                    rules.env = Vars.defaultEnv;</b>
<b class="nc">&nbsp;                    rules.planet = Planets.sun;</b>
<b class="nc">&nbsp;                }).group(group).checked(b -&gt; rules.planet == Planets.sun);</b>
<b class="nc">&nbsp;            }).left().fill(false).expand(false, false).row();</b>
&nbsp;        }
&nbsp;
&nbsp;
<b class="nc">&nbsp;        category(&quot;teams&quot;);</b>
&nbsp;        //not sure where else to put this
<b class="nc">&nbsp;        if(showRuleEditRule){</b>
<b class="nc">&nbsp;            check(&quot;@rules.allowedit&quot;, b -&gt; rules.allowEditRules = b, () -&gt; rules.allowEditRules);</b>
&nbsp;        }
<b class="nc">&nbsp;        team(&quot;@rules.playerteam&quot;, t -&gt; rules.defaultTeam = t, () -&gt; rules.defaultTeam);</b>
<b class="nc">&nbsp;        team(&quot;@rules.enemyteam&quot;, t -&gt; rules.waveTeam = t, () -&gt; rules.waveTeam);</b>
&nbsp;
<b class="nc">&nbsp;        for(Team team : Team.baseTeams){</b>
<b class="nc">&nbsp;            boolean[] shown = {false};</b>
<b class="nc">&nbsp;            Table wasCurrent = current;</b>
&nbsp;
<b class="nc">&nbsp;            Table teamRules = new Table(); // just button and collapser in one table</b>
<b class="nc">&nbsp;            teamRules.button(team.coloredName(), Icon.downOpen, Styles.togglet, () -&gt; {</b>
<b class="nc">&nbsp;                shown[0] = !shown[0];</b>
<b class="nc">&nbsp;            }).marginLeft(14f).width(260f).height(55f).update(t -&gt; {</b>
<b class="nc">&nbsp;                ((Image)t.getChildren().get(1)).setDrawable(shown[0] ? Icon.upOpen : Icon.downOpen);</b>
<b class="nc">&nbsp;                t.setChecked(shown[0]);</b>
<b class="nc">&nbsp;            }).left().padBottom(2f).row();</b>
&nbsp;
<b class="nc">&nbsp;            teamRules.collapser(c -&gt; {</b>
<b class="nc">&nbsp;                c.left().defaults().fillX().left().pad(5);</b>
<b class="nc">&nbsp;                current = c;</b>
<b class="nc">&nbsp;                TeamRule teams = rules.teams.get(team);</b>
&nbsp;
<b class="nc">&nbsp;                number(&quot;@rules.blockhealthmultiplier&quot;, f -&gt; teams.blockHealthMultiplier = f, () -&gt; teams.blockHealthMultiplier);</b>
<b class="nc">&nbsp;                number(&quot;@rules.blockdamagemultiplier&quot;, f -&gt; teams.blockDamageMultiplier = f, () -&gt; teams.blockDamageMultiplier);</b>
&nbsp;
<b class="nc">&nbsp;                check(&quot;@rules.rtsai&quot;, b -&gt; teams.rtsAi = b, () -&gt; teams.rtsAi, () -&gt; team != rules.defaultTeam);</b>
<b class="nc">&nbsp;                numberi(&quot;@rules.rtsminsquadsize&quot;, f -&gt; teams.rtsMinSquad = f, () -&gt; teams.rtsMinSquad, () -&gt; teams.rtsAi, 0, 100);</b>
<b class="nc">&nbsp;                numberi(&quot;@rules.rtsmaxsquadsize&quot;, f -&gt; teams.rtsMaxSquad = f, () -&gt; teams.rtsMaxSquad, () -&gt; teams.rtsAi, 1, 1000);</b>
<b class="nc">&nbsp;                number(&quot;@rules.rtsminattackweight&quot;, f -&gt; teams.rtsMinWeight = f, () -&gt; teams.rtsMinWeight, () -&gt; teams.rtsAi);</b>
&nbsp;
&nbsp;                //disallow on Erekir (this is broken for mods I&#39;m sure, but whatever)
<b class="nc">&nbsp;                check(&quot;@rules.buildai&quot;, b -&gt; teams.buildAi = b, () -&gt; teams.buildAi, () -&gt; team != rules.defaultTeam &amp;&amp; rules.env != Planets.erekir.defaultEnv &amp;&amp; !rules.pvp);</b>
<b class="nc">&nbsp;                number(&quot;@rules.buildaitier&quot;, false, f -&gt; teams.buildAiTier = f, () -&gt; teams.buildAiTier, () -&gt; teams.buildAi &amp;&amp; rules.env != Planets.erekir.defaultEnv &amp;&amp; !rules.pvp, 0, 1);</b>
&nbsp;
<b class="nc">&nbsp;                check(&quot;@rules.infiniteresources&quot;, b -&gt; teams.infiniteResources = b, () -&gt; teams.infiniteResources);</b>
<b class="nc">&nbsp;                number(&quot;@rules.buildspeedmultiplier&quot;, f -&gt; teams.buildSpeedMultiplier = f, () -&gt; teams.buildSpeedMultiplier, 0.001f, 50f);</b>
&nbsp;
<b class="nc">&nbsp;                number(&quot;@rules.unitdamagemultiplier&quot;, f -&gt; teams.unitDamageMultiplier = f, () -&gt; teams.unitDamageMultiplier);</b>
<b class="nc">&nbsp;                number(&quot;@rules.unitcrashdamagemultiplier&quot;, f -&gt; teams.unitCrashDamageMultiplier = f, () -&gt; teams.unitCrashDamageMultiplier);</b>
<b class="nc">&nbsp;                number(&quot;@rules.unitbuildspeedmultiplier&quot;, f -&gt; teams.unitBuildSpeedMultiplier = f, () -&gt; teams.unitBuildSpeedMultiplier, 0.001f, 50f);</b>
<b class="nc">&nbsp;                number(&quot;@rules.unitcostmultiplier&quot;, f -&gt; teams.unitCostMultiplier = f, () -&gt; teams.unitCostMultiplier);</b>
<b class="nc">&nbsp;                number(&quot;@rules.unithealthmultiplier&quot;, f -&gt; teams.unitHealthMultiplier = f, () -&gt; teams.unitHealthMultiplier);</b>
&nbsp;
<b class="nc">&nbsp;                if(!current.hasChildren()){</b>
<b class="nc">&nbsp;                    teamRules.clear();</b>
&nbsp;                }else{
<b class="nc">&nbsp;                    wasCurrent.add(teamRules).row();</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                current = wasCurrent;</b>
<b class="nc">&nbsp;            }, () -&gt; shown[0]).left().growX().row();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        additionalSetup.each(Runnable::run);</b>
&nbsp;
<b class="nc">&nbsp;        for(var i = 0; i &lt; categories.size; i++){</b>
<b class="nc">&nbsp;            addToMain(categories.get(i), Core.bundle.get(&quot;rules.title.&quot; + categoryNames.get(i)));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void category(String name){
<b class="nc">&nbsp;        current = new Table();</b>
<b class="nc">&nbsp;        current.left().defaults().fillX().left().pad(5);</b>
<b class="nc">&nbsp;        currentName = name;</b>
<b class="nc">&nbsp;        categories.add(current);</b>
<b class="nc">&nbsp;        categoryNames.add(currentName);</b>
&nbsp;    }
&nbsp;
&nbsp;    void addToMain(Table category, String title){
<b class="nc">&nbsp;        if(category.hasChildren()){</b>
<b class="nc">&nbsp;            main.add(title).color(Pal.accent).padTop(20).padRight(100f).padBottom(-3).fillX().left().pad(5).row();</b>
<b class="nc">&nbsp;            main.image().color(Pal.accent).height(3f).padRight(100f).padBottom(20).fillX().left().pad(5).row();</b>
<b class="nc">&nbsp;            main.add(category).row();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void team(String text, Cons&lt;Team&gt; cons, Prov&lt;Team&gt; prov){
<b class="nc">&nbsp;        if(!Core.bundle.get(text.substring(1)).toLowerCase().contains(ruleSearch)) return;</b>
<b class="nc">&nbsp;        current.table(t -&gt; {</b>
<b class="nc">&nbsp;            t.left();</b>
<b class="nc">&nbsp;            t.add(text).left().padRight(5);</b>
&nbsp;
<b class="nc">&nbsp;            for(Team team : Team.baseTeams){</b>
<b class="nc">&nbsp;                t.button(Tex.whiteui, Styles.squareTogglei, 38f, () -&gt; {</b>
<b class="nc">&nbsp;                    cons.get(team);</b>
<b class="nc">&nbsp;                }).pad(1f).checked(b -&gt; prov.get() == team).size(60f).tooltip(team.coloredName()).with(i -&gt; i.getStyle().imageUpColor = team.color);</b>
&nbsp;            }
<b class="nc">&nbsp;        }).padTop(0).row();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void number(String text, Floatc cons, Floatp prov){
<b class="nc">&nbsp;        number(text, false, cons, prov, () -&gt; true, 0, Float.MAX_VALUE);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void number(String text, Floatc cons, Floatp prov, float min, float max){
<b class="nc">&nbsp;        number(text, false, cons, prov, () -&gt; true, min, max);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void number(String text, boolean integer, Floatc cons, Floatp prov, Boolp condition){
<b class="nc">&nbsp;        number(text, integer, cons, prov, condition, 0, Float.MAX_VALUE);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void number(String text, Floatc cons, Floatp prov, Boolp condition){
<b class="nc">&nbsp;        number(text, false, cons, prov, condition, 0, Float.MAX_VALUE);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void numberi(String text, Intc cons, Intp prov, int min, int max){
<b class="nc">&nbsp;        numberi(text, cons, prov, () -&gt; true, min, max);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void numberi(String text, Intc cons, Intp prov, Boolp condition, int min, int max){
<b class="nc">&nbsp;        if(!Core.bundle.get(text.substring(1)).toLowerCase().contains(ruleSearch)) return;</b>
<b class="nc">&nbsp;        current.table(t -&gt; {</b>
<b class="nc">&nbsp;            t.left();</b>
<b class="nc">&nbsp;            t.add(text).left().padRight(5)</b>
<b class="nc">&nbsp;                .update(a -&gt; a.setColor(condition.get() ? Color.white : Color.gray));</b>
<b class="nc">&nbsp;            t.field((prov.get()) + &quot;&quot;, s -&gt; cons.get(Strings.parseInt(s)))</b>
<b class="nc">&nbsp;                .update(a -&gt; a.setDisabled(!condition.get()))</b>
<b class="nc">&nbsp;                .padRight(100f)</b>
<b class="nc">&nbsp;                .valid(f -&gt; Strings.parseInt(f) &gt;= min &amp;&amp; Strings.parseInt(f) &lt;= max).width(120f).left();</b>
<b class="nc">&nbsp;        }).padTop(0).row();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void number(String text, boolean integer, Floatc cons, Floatp prov, Boolp condition, float min, float max){
<b class="nc">&nbsp;        if(!Core.bundle.get(text.substring(1)).toLowerCase().contains(ruleSearch)) return;</b>
<b class="nc">&nbsp;        current.table(t -&gt; {</b>
<b class="nc">&nbsp;            t.left();</b>
<b class="nc">&nbsp;            t.add(text).left().padRight(5)</b>
<b class="nc">&nbsp;            .update(a -&gt; a.setColor(condition.get() ? Color.white : Color.gray));</b>
<b class="nc">&nbsp;            t.field((integer ? (int)prov.get() : prov.get()) + &quot;&quot;, s -&gt; cons.get(Strings.parseFloat(s)))</b>
<b class="nc">&nbsp;            .padRight(100f)</b>
<b class="nc">&nbsp;            .update(a -&gt; a.setDisabled(!condition.get()))</b>
<b class="nc">&nbsp;            .valid(f -&gt; Strings.canParsePositiveFloat(f) &amp;&amp; Strings.parseFloat(f) &gt;= min &amp;&amp; Strings.parseFloat(f) &lt;= max).width(120f).left();</b>
<b class="nc">&nbsp;        }).padTop(0);</b>
<b class="nc">&nbsp;        current.row();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void check(String text, Boolc cons, Boolp prov){
<b class="nc">&nbsp;        check(text, cons, prov, () -&gt; true);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void check(String text, Boolc cons, Boolp prov, Boolp condition){
<b class="nc">&nbsp;        if(!Core.bundle.get(text.substring(1)).toLowerCase().contains(ruleSearch)) return;</b>
<b class="nc">&nbsp;        String infoText = text.substring(1) + &quot;.info&quot;;</b>
<b class="nc">&nbsp;        var cell = current.check(text, cons).checked(prov.get()).update(a -&gt; a.setDisabled(!condition.get())).padRight(100f);</b>
<b class="nc">&nbsp;        if(Core.bundle.has(infoText)){</b>
<b class="nc">&nbsp;            cell.tooltip(text + &quot;.info&quot;);</b>
&nbsp;        }
<b class="nc">&nbsp;        cell.get().left();</b>
<b class="nc">&nbsp;        current.row();</b>
&nbsp;    }
&nbsp;
&nbsp;    Cell&lt;TextField&gt; field(Table table, float value, Floatc setter){
<b class="nc">&nbsp;        return table.field(Strings.autoFixed(value, 2), v -&gt; setter.get(Strings.parseFloat(v)))</b>
<b class="nc">&nbsp;            .valid(Strings::canParsePositiveFloat)</b>
<b class="nc">&nbsp;            .size(90f, 40f).pad(2f);</b>
&nbsp;    }
&nbsp;
&nbsp;    void weatherDialog(){
<b class="nc">&nbsp;        BaseDialog dialog = new BaseDialog(&quot;@rules.weather&quot;);</b>
<b class="nc">&nbsp;        Runnable[] rebuild = {null};</b>
&nbsp;
<b class="nc">&nbsp;        dialog.cont.pane(base -&gt; {</b>
&nbsp;
<b class="nc">&nbsp;            rebuild[0] = () -&gt; {</b>
<b class="nc">&nbsp;                base.clearChildren();</b>
<b class="nc">&nbsp;                int cols = Math.max(1, (int)(Core.graphics.getWidth() / Scl.scl(450)));</b>
<b class="nc">&nbsp;                int idx = 0;</b>
&nbsp;
<b class="nc">&nbsp;                for(WeatherEntry entry : rules.weather){</b>
<b class="nc">&nbsp;                    base.top();</b>
&nbsp;                    //main container
<b class="nc">&nbsp;                    base.table(Tex.pane, c -&gt; {</b>
<b class="nc">&nbsp;                        c.margin(0);</b>
&nbsp;
&nbsp;                        //icons to perform actions
<b class="nc">&nbsp;                        c.table(Tex.whiteui, t -&gt; {</b>
<b class="nc">&nbsp;                            t.setColor(Pal.gray);</b>
&nbsp;
<b class="nc">&nbsp;                            t.top().left();</b>
<b class="nc">&nbsp;                            t.add(entry.weather.localizedName).left().padLeft(6);</b>
&nbsp;
<b class="nc">&nbsp;                            t.add().growX();</b>
&nbsp;
<b class="nc">&nbsp;                            ImageButtonStyle style = Styles.geni;</b>
<b class="nc">&nbsp;                            t.defaults().size(42f);</b>
&nbsp;
<b class="nc">&nbsp;                            t.button(Icon.cancel, style, () -&gt; {</b>
<b class="nc">&nbsp;                                rules.weather.remove(entry);</b>
<b class="nc">&nbsp;                                rebuild[0].run();</b>
&nbsp;                            });
<b class="nc">&nbsp;                        }).growX();</b>
&nbsp;
<b class="nc">&nbsp;                        c.row();</b>
&nbsp;
&nbsp;                        //all the options
<b class="nc">&nbsp;                        c.table(f -&gt; {</b>
<b class="nc">&nbsp;                            f.marginLeft(4);</b>
<b class="nc">&nbsp;                            f.left().top();</b>
&nbsp;
<b class="nc">&nbsp;                            f.defaults().padRight(4).left();</b>
&nbsp;
<b class="nc">&nbsp;                            f.add(&quot;@rules.weather.duration&quot;);</b>
<b class="nc">&nbsp;                            field(f, entry.minDuration / toMinutes, v -&gt; entry.minDuration = v * toMinutes).disabled(v -&gt; entry.always);</b>
<b class="nc">&nbsp;                            f.add(&quot;@waves.to&quot;);</b>
<b class="nc">&nbsp;                            field(f, entry.maxDuration / toMinutes, v -&gt; entry.maxDuration = v * toMinutes).disabled(v -&gt; entry.always);</b>
<b class="nc">&nbsp;                            f.add(&quot;@unit.minutes&quot;);</b>
&nbsp;
<b class="nc">&nbsp;                            f.row();</b>
&nbsp;
<b class="nc">&nbsp;                            f.add(&quot;@rules.weather.frequency&quot;);</b>
<b class="nc">&nbsp;                            field(f, entry.minFrequency / toMinutes, v -&gt; entry.minFrequency = v * toMinutes).disabled(v -&gt; entry.always);</b>
<b class="nc">&nbsp;                            f.add(&quot;@waves.to&quot;);</b>
<b class="nc">&nbsp;                            field(f, entry.maxFrequency / toMinutes, v -&gt; entry.maxFrequency = v * toMinutes).disabled(v -&gt; entry.always);</b>
<b class="nc">&nbsp;                            f.add(&quot;@unit.minutes&quot;);</b>
&nbsp;
<b class="nc">&nbsp;                            f.row();</b>
&nbsp;
<b class="nc">&nbsp;                            f.check(&quot;@rules.weather.always&quot;, val -&gt; entry.always = val).checked(cc -&gt; entry.always).padBottom(4);</b>
&nbsp;
&nbsp;                            //intensity can&#39;t currently be customized
&nbsp;
<b class="nc">&nbsp;                        }).grow().left().pad(6).top();</b>
<b class="nc">&nbsp;                    }).width(410f).pad(3).top().left().fillY();</b>
&nbsp;
<b class="nc">&nbsp;                    if(++idx % cols == 0){</b>
<b class="nc">&nbsp;                        base.row();</b>
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
&nbsp;            };
&nbsp;
<b class="nc">&nbsp;            rebuild[0].run();</b>
<b class="nc">&nbsp;        }).grow();</b>
&nbsp;
<b class="nc">&nbsp;        dialog.addCloseButton();</b>
&nbsp;
<b class="nc">&nbsp;        dialog.buttons.button(&quot;@add&quot;, Icon.add, () -&gt; {</b>
<b class="nc">&nbsp;            BaseDialog add = new BaseDialog(&quot;@add&quot;);</b>
<b class="nc">&nbsp;            add.cont.pane(t -&gt; {</b>
<b class="nc">&nbsp;                t.background(Tex.button);</b>
<b class="nc">&nbsp;                int i = 0;</b>
<b class="nc">&nbsp;                for(Weather weather : content.&lt;Weather&gt;getBy(ContentType.weather)){</b>
<b class="nc">&nbsp;                    if(weather.hidden) continue;</b>
&nbsp;
<b class="nc">&nbsp;                    t.button(weather.localizedName, Styles.flatt, () -&gt; {</b>
<b class="nc">&nbsp;                        rules.weather.add(new WeatherEntry(weather));</b>
<b class="nc">&nbsp;                        rebuild[0].run();</b>
&nbsp;
<b class="nc">&nbsp;                        add.hide();</b>
<b class="nc">&nbsp;                    }).size(140f, 50f);</b>
<b class="nc">&nbsp;                    if(++i % 2 == 0) t.row();</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            });
<b class="nc">&nbsp;            add.addCloseButton();</b>
<b class="nc">&nbsp;            add.show();</b>
<b class="nc">&nbsp;        }).width(170f);</b>
&nbsp;
<b class="nc">&nbsp;        dialog.show();</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-10-10 15:59</div>
</div>
</body>
</html>
